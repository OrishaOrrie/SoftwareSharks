{"version":3,"sources":["../../src/core/Core.test.js"],"names":["Core","require","utils","Plugin","AcquirerPlugin1","AcquirerPlugin2","InvalidPlugin","InvalidPluginWithoutId","InvalidPluginWithoutType","jest","mock","sampleImageDataURI","describe","RealCreateObjectUrl","global","URL","createObjectURL","beforeEach","spyOn","mockImplementation","resolve","createThumbnail","mockClear","fn","mockReturnValue","afterEach","it","core","expect","constructor","name","toEqual","getID","core2","id","use","Object","keys","plugins","acquirer","length","toThrowErrorMatchingSnapshot","getPlugin","plugin","iteratePlugins","run","mocks","calls","removePlugin","uninstall","updateAll","foo","update","stateUpdateEventMock","on","setState","bee","newState","capabilities","resumableUploads","files","currentUploads","info","isHidden","message","type","meta","totalProgress","state","getState","coreCancelEventMock","coreStateUpdateEventMock","reset","_createUpload","toBeDefined","cancelAll","toBeUndefined","close","addPreProcessor","fileIDs","uploadID","addResultData","pre","addPostProcessor","post","addUploader","upload","then","result","toBe","preprocessor","preProcessors","preprocessor1","preprocessor2","preprocessor3","removePreProcessor","addFile","source","data","dataURItoFile","fileId","file","getFile","emit","mode","value","progress","percentage","bytesUploaded","bytesTotal","uploadComplete","uploadStarted","preprocess","fileID","postprocessor","postProcessors","postprocessor1","postprocessor2","postprocessor3","removePostProcessor","substring","postprocess","uploader","uploaders","uploader1","uploader2","uploader3","removeUploader","onBeforeFileAdded","fileData","fileAddedEventMock","newFile","extension","isRemote","preview","undefined","remote","size","restrictions","allowedFileTypes","Error","catch","e","reject","rejects","toMatchObject","all","Uint8Array","resolves","successful","failed","forEach","test","error","store","upload1","upload2","toMatchSnapshot","fileRemovedEventMock","removeFile","xit","foo2","setMeta","bur","boo","setFileMeta","_calculateProgress","fileId1","fileId2","file1","file2","Date","_calculateTotalProgress","resetProgressEvent","resetProgress","autoProceed","maxNumberOfFiles","maxFileSize","RealNavigatorOnline","window","navigator","onLine","mockNavigatorOnline","status","defineProperty","writable","onlineEventMock","offlineEventMock","backOnlineEventMock","updateOnlineStatus","infoVisibleEvent","details","infoTimeoutID","done","infoHiddenEvent","setTimeout","hideInfo","uploadId","currentUploadsState","step","locale","strings","i18n","opts","minNumberOfFiles"],"mappings":";;;;AAAA,IAAMA,OAAOC,QAAQ,QAAR,CAAb;AACA,IAAMC,QAAQD,QAAQ,SAAR,CAAd;AACA,IAAME,SAASF,QAAQ,UAAR,CAAf;AACA,IAAMG,kBAAkBH,QAAQ,kCAAR,CAAxB;AACA,IAAMI,kBAAkBJ,QAAQ,kCAAR,CAAxB;AACA,IAAMK,gBAAgBL,QAAQ,gCAAR,CAAtB;AACA,IAAMM,yBAAyBN,QAAQ,yCAAR,CAA/B;AACA,IAAMO,2BAA2BP,QAAQ,2CAAR,CAAjC;;AAEAQ,KAAKC,IAAL,CAAU,MAAV,EAAkB,YAAM;AACtB,SAAO;AAAA,WAAM,2BAAN;AAAA,GAAP;AACD,CAFD;;AAIA,IAAMC,qBACJ,64sBADF;;AAGAC,SAAS,UAAT,EAAqB,YAAM;AACzB,MAAMC,sBAAsBC,OAAOC,GAAP,CAAWC,eAAvC;AACAC,aAAW,YAAM;AACfR,SAAKS,KAAL,CAAWhB,KAAX,EAAkB,gBAAlB,EAAoCiB,kBAApC,CAAuD,gBAAQ;AAC7D,aAAO,gBAAP;AACD,KAFD;AAGAV,SAAKS,KAAL,CAAWhB,KAAX,EAAkB,iBAAlB,EAAqCiB,kBAArC,CAAwD,gBAAQ;AAC9D,aAAO,SAAQC,OAAR,CAAgBT,kBAAhB,CAAP;AACD,KAFD;AAGAT,UAAMmB,eAAN,CAAsBC,SAAtB;;AAEAR,WAAOC,GAAP,CAAWC,eAAX,GAA6BP,KAAKc,EAAL,GAAUC,eAAV,CAA0B,QAA1B,CAA7B;AACD,GAVD;;AAYAC,YAAU,YAAM;AACdX,WAAOC,GAAP,CAAWC,eAAX,GAA6BH,mBAA7B;AACD,GAFD;;AAIAa,KAAG,uBAAH,EAA4B,YAAM;AAChC,QAAMC,OAAO3B,MAAb;AACA4B,WAAOD,KAAKE,WAAL,CAAiBC,IAAxB,EAA8BC,OAA9B,CAAsC,MAAtC;AACD,GAHD;;AAKAL,KAAG,0DAAH,EAA+D,YAAM;AACnE,QAAMC,OAAO3B,MAAb;AACA4B,WAAOD,KAAKK,KAAL,EAAP,EAAqBD,OAArB,CAA6B,MAA7B;;AAEA,QAAME,QAAQjC,KAAK,EAAEkC,IAAI,SAAN,EAAL,CAAd;AACAN,WAAOK,MAAMD,KAAN,EAAP,EAAsBD,OAAtB,CAA8B,SAA9B;AACD,GAND;;AAQAnB,WAAS,SAAT,EAAoB,YAAM;AACxBc,OAAG,yCAAH,EAA8C,YAAM;AAClD,UAAMC,OAAO3B,MAAb;AACA2B,WAAKQ,GAAL,CAAS/B,eAAT;AACAwB,aAAOQ,OAAOC,IAAP,CAAYV,KAAKW,OAAL,CAAaC,QAAzB,EAAmCC,MAA1C,EAAkDT,OAAlD,CAA0D,CAA1D;AACD,KAJD;;AAMAL,OAAG,gEAAH,EAAqE,YAAM;AACzE,UAAMC,OAAO3B,MAAb;AACA2B,WAAKQ,GAAL,CAAS/B,eAAT;;AAEAwB,aAAO,YAAM;AACXD,aAAKQ,GAAL,CAAS/B,eAAT;AACD,OAFD,EAEGqC,4BAFH;AAGD,KAPD;;AASAf,OAAG,6CAAH,EAAkD,YAAM;AACtD,UAAMC,OAAO3B,MAAb;;AAEA4B,aAAO,YAAM;AACXD,aAAKQ,GAAL,CAAS7B,aAAT;AACD,OAFD,EAEGmC,4BAFH;AAGD,KAND;;AAQAf,OAAG,mDAAH,EAAwD,YAAM;AAC5D,UAAMC,OAAO3B,MAAb;;AAEA4B,aAAO;AAAA,eACLD,KAAKQ,GAAL,CAAS5B,sBAAT,CADK;AAAA,OAAP,EAEEkC,4BAFF;AAGD,KAND;;AAQAf,OAAG,qDAAH,EAA0D,YAAM;AAC9D,UAAMC,OAAO3B,MAAb;;AAEA4B,aAAO;AAAA,eACLD,KAAKQ,GAAL,CAAS3B,wBAAT,CADK;AAAA,OAAP,EAEEiC,4BAFF;AAGD,KAND;;AAQAf,OAAG,0DAAH,EAA+D,YAAM;AACnE,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA4B,aAAOD,KAAKe,SAAL,CAAe,KAAf,CAAP,EAA8BX,OAA9B,CAAsC,KAAtC;;AAEAJ,WAAKQ,GAAL,CAAS/B,eAAT;AACA,UAAMuC,SAAShB,KAAKe,SAAL,CAAe,eAAf,CAAf;AACAd,aAAOe,OAAOT,EAAd,EAAkBH,OAAlB,CAA0B,eAA1B;AACAH,aAAOe,kBAAkBxC,MAAzB;AACD,KARD;;AAUAuB,OAAG,qDAAH,EAA0D,YAAM;AAC9D,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKQ,GAAL,CAAS/B,eAAT;AACAuB,WAAKQ,GAAL,CAAS9B,eAAT;AACAsB,WAAKiB,cAAL,CAAoB,kBAAU;AAC5BD,eAAOE,GAAP,CAAW,OAAX;AACD,OAFD;AAGAjB,aAAOD,KAAKW,OAAL,CAAaC,QAAb,CAAsB,CAAtB,EAAyBO,KAAzB,CAA+BD,GAA/B,CAAmCnC,IAAnC,CAAwCqC,KAAxC,CAA8CP,MAArD,EAA6DT,OAA7D,CAAqE,CAArE;AACAH,aAAOD,KAAKW,OAAL,CAAaC,QAAb,CAAsB,CAAtB,EAAyBO,KAAzB,CAA+BD,GAA/B,CAAmCnC,IAAnC,CAAwCqC,KAAxC,CAA8C,CAA9C,CAAP,EAAyDhB,OAAzD,CAAiE,CAC/D,OAD+D,CAAjE;AAGAH,aAAOD,KAAKW,OAAL,CAAaC,QAAb,CAAsB,CAAtB,EAAyBO,KAAzB,CAA+BD,GAA/B,CAAmCnC,IAAnC,CAAwCqC,KAAxC,CAA8CP,MAArD,EAA6DT,OAA7D,CAAqE,CAArE;AACAH,aAAOD,KAAKW,OAAL,CAAaC,QAAb,CAAsB,CAAtB,EAAyBO,KAAzB,CAA+BD,GAA/B,CAAmCnC,IAAnC,CAAwCqC,KAAxC,CAA8C,CAA9C,CAAP,EAAyDhB,OAAzD,CAAiE,CAC/D,OAD+D,CAAjE;AAGD,KAfD;;AAiBAL,OAAG,sDAAH,EAA2D,YAAM;AAC/D,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKQ,GAAL,CAAS/B,eAAT;AACAuB,WAAKQ,GAAL,CAAS9B,eAAT;AACAuB,aAAOQ,OAAOC,IAAP,CAAYV,KAAKW,OAAL,CAAaC,QAAzB,EAAmCC,MAA1C,EAAkDT,OAAlD,CAA0D,CAA1D;;AAEA,UAAMY,SAAShB,KAAKe,SAAL,CAAe,eAAf,CAAf;AACAf,WAAKqB,YAAL,CAAkBL,MAAlB;AACAf,aAAOQ,OAAOC,IAAP,CAAYV,KAAKW,OAAL,CAAaC,QAAzB,EAAmCC,MAA1C,EAAkDT,OAAlD,CAA0D,CAA1D;AACAH,aAAOe,OAAOG,KAAP,CAAaG,SAAb,CAAuBvC,IAAvB,CAA4BqC,KAA5B,CAAkCP,MAAzC,EAAiDT,OAAjD,CAAyD,CAAzD;AACAH,aAAOD,KAAKW,OAAL,CAAaC,QAAb,CAAsB,CAAtB,EAAyBO,KAAzB,CAA+BD,GAA/B,CAAmCnC,IAAnC,CAAwCqC,KAAxC,CAA8CP,MAArD,EAA6DT,OAA7D,CAAqE,CAArE;AACD,KAXD;AAYD,GA/ED;;AAiFAnB,WAAS,OAAT,EAAkB,YAAM;AACtBc,OAAG,sFAAH,EAA2F,YAAM;AAC/F,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKQ,GAAL,CAAS/B,eAAT;AACAuB,WAAKQ,GAAL,CAAS9B,eAAT;AACAsB,WAAKuB,SAAL,CAAe,EAAEC,KAAK,KAAP,EAAf;AACAvB,aAAOD,KAAKW,OAAL,CAAaC,QAAb,CAAsB,CAAtB,EAAyBO,KAAzB,CAA+BM,MAA/B,CAAsC1C,IAAtC,CAA2CqC,KAA3C,CAAiDP,MAAxD,EAAgET,OAAhE,CAAwE,CAAxE;AACAH,aAAOD,KAAKW,OAAL,CAAaC,QAAb,CAAsB,CAAtB,EAAyBO,KAAzB,CAA+BM,MAA/B,CAAsC1C,IAAtC,CAA2CqC,KAA3C,CAAiD,CAAjD,CAAP,EAA4DhB,OAA5D,CAAoE,CAClE,EAAEoB,KAAK,KAAP,EADkE,CAApE;AAGAvB,aAAOD,KAAKW,OAAL,CAAaC,QAAb,CAAsB,CAAtB,EAAyBO,KAAzB,CAA+BM,MAA/B,CAAsC1C,IAAtC,CAA2CqC,KAA3C,CAAiDP,MAAxD,EAAgET,OAAhE,CAAwE,CAAxE;AACAH,aAAOD,KAAKW,OAAL,CAAaC,QAAb,CAAsB,CAAtB,EAAyBO,KAAzB,CAA+BM,MAA/B,CAAsC1C,IAAtC,CAA2CqC,KAA3C,CAAiD,CAAjD,CAAP,EAA4DhB,OAA5D,CAAoE,CAClE,EAAEoB,KAAK,KAAP,EADkE,CAApE;AAGD,KAbD;;AAeAzB,OAAG,yBAAH,EAA8B,YAAM;AAClC,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA,UAAMqD,uBAAuB5C,KAAKc,EAAL,EAA7B;AACAI,WAAK2B,EAAL,CAAQ,cAAR,EAAwBD,oBAAxB;AACA1B,WAAKQ,GAAL,CAAS/B,eAAT;AACAuB,WAAKQ,GAAL,CAAS9B,eAAT;;AAEAsB,WAAK4B,QAAL,CAAc,EAAEJ,KAAK,KAAP,EAAcK,KAAK,KAAnB,EAAd;AACA7B,WAAK4B,QAAL,CAAc,EAAEJ,KAAK,MAAP,EAAd;;AAEA,UAAMM,WAAW;AACfD,aAAK,KADU;AAEfE,sBAAc,EAAEC,kBAAkB,KAApB,EAFC;AAGfC,eAAO,EAHQ;AAIfC,wBAAgB,EAJD;AAKfV,aAAK,MALU;AAMfW,cAAM,EAAEC,UAAU,IAAZ,EAAkBC,SAAS,EAA3B,EAA+BC,MAAM,MAArC,EANS;AAOfC,cAAM,EAPS;AAQf5B,iBAAS,EARM;AASf6B,uBAAe;AATA,OAAjB;;AAYAvC,aAAOD,KAAKyC,KAAZ,EAAmBrC,OAAnB,CAA2B0B,QAA3B;;AAEA7B,aAAOD,KAAKW,OAAL,CAAaC,QAAb,CAAsB,CAAtB,EAAyBO,KAAzB,CAA+BM,MAA/B,CAAsC1C,IAAtC,CAA2CqC,KAA3C,CAAiD,CAAjD,CAAP,EAA4DhB,OAA5D,CAAoE,CAClE0B,QADkE,CAApE;AAGA7B,aAAOD,KAAKW,OAAL,CAAaC,QAAb,CAAsB,CAAtB,EAAyBO,KAAzB,CAA+BM,MAA/B,CAAsC1C,IAAtC,CAA2CqC,KAA3C,CAAiD,CAAjD,CAAP,EAA4DhB,OAA5D,CAAoE,CAClE0B,QADkE,CAApE;;AAIA7B,aAAOyB,qBAAqB3C,IAArB,CAA0BqC,KAA1B,CAAgCP,MAAvC,EAA+CT,OAA/C,CAAuD,CAAvD;AACA;AACAH,aAAOyB,qBAAqB3C,IAArB,CAA0BqC,KAA1B,CAAgC,CAAhC,EAAmC,CAAnC,CAAP,EAA8ChB,OAA9C,CAAsD;AACpDyB,aAAK,KAD+C;AAEpDE,sBAAc,EAAEC,kBAAkB,KAApB,EAFsC;AAGpDC,eAAO,EAH6C;AAIpDC,wBAAgB,EAJoC;AAKpDV,aAAK,KAL+C;AAMpDW,cAAM,EAAEC,UAAU,IAAZ,EAAkBC,SAAS,EAA3B,EAA+BC,MAAM,MAArC,EAN8C;AAOpDC,cAAM,EAP8C;AAQpD5B,iBAAS,EAR2C;AASpD6B,uBAAe;AATqC,OAAtD;AAWA;AACAvC,aAAOyB,qBAAqB3C,IAArB,CAA0BqC,KAA1B,CAAgC,CAAhC,EAAmC,CAAnC,CAAP,EAA8ChB,OAA9C,CAAsD;AACpDyB,aAAK,KAD+C;AAEpDE,sBAAc,EAAEC,kBAAkB,KAApB,EAFsC;AAGpDC,eAAO,EAH6C;AAIpDC,wBAAgB,EAJoC;AAKpDV,aAAK,MAL+C;AAMpDW,cAAM,EAAEC,UAAU,IAAZ,EAAkBC,SAAS,EAA3B,EAA+BC,MAAM,MAArC,EAN8C;AAOpDC,cAAM,EAP8C;AAQpD5B,iBAAS,EAR2C;AASpD6B,uBAAe;AATqC,OAAtD;AAWD,KAxDD;;AA0DAzC,OAAG,sBAAH,EAA2B,YAAM;AAC/B,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;;AAEA2B,WAAK4B,QAAL,CAAc,EAAEJ,KAAK,KAAP,EAAd;;AAEAvB,aAAOD,KAAK0C,QAAL,EAAP,EAAwBtC,OAAxB,CAAgC;AAC9B2B,sBAAc,EAAEC,kBAAkB,KAApB,EADgB;AAE9BC,eAAO,EAFuB;AAG9BC,wBAAgB,EAHc;AAI9BV,aAAK,KAJyB;AAK9BW,cAAM,EAAEC,UAAU,IAAZ,EAAkBC,SAAS,EAA3B,EAA+BC,MAAM,MAArC,EALwB;AAM9BC,cAAM,EANwB;AAO9B5B,iBAAS,EAPqB;AAQ9B6B,uBAAe;AARe,OAAhC;AAUD,KAfD;AAgBD,GA1FD;;AA4FAzC,KAAG,8CAAH,EAAmD,YAAM;AACvD,QAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA;AACA,QAAMsE,sBAAsB7D,KAAKc,EAAL,EAA5B;AACA,QAAMgD,2BAA2B9D,KAAKc,EAAL,EAAjC;AACAI,SAAK2B,EAAL,CAAQ,YAAR,EAAsBgB,mBAAtB;AACA3C,SAAK2B,EAAL,CAAQ,cAAR,EAAwBiB,wBAAxB;AACA5C,SAAK4B,QAAL,CAAc,EAAEJ,KAAK,KAAP,EAAcgB,eAAe,EAA7B,EAAd;;AAEAxC,SAAK6C,KAAL;;AAEA;AACA5C,WAAO0C,oBAAoB5D,IAApB,CAAyBqC,KAAzB,CAA+BP,MAAtC,EAA8CT,OAA9C,CAAsD,CAAtD;AACAH,WAAO2C,yBAAyB7D,IAAzB,CAA8BqC,KAA9B,CAAoCP,MAA3C,EAAmDT,OAAnD,CAA2D,CAA3D;AACAH,WAAO2C,yBAAyB7D,IAAzB,CAA8BqC,KAA9B,CAAoC,CAApC,EAAuC,CAAvC,CAAP,EAAkDhB,OAAlD,CAA0D;AACxD2B,oBAAc,EAAEC,kBAAkB,KAApB,EAD0C;AAExDC,aAAO,EAFiD;AAGxDC,sBAAgB,EAHwC;AAIxDV,WAAK,KAJmD;AAKxDW,YAAM,EAAEC,UAAU,IAAZ,EAAkBC,SAAS,EAA3B,EAA+BC,MAAM,MAArC,EALkD;AAMxDC,YAAM,EANkD;AAOxD5B,eAAS,EAP+C;AAQxD6B,qBAAe;AARyC,KAA1D;AAUD,GAxBD;;AA0BAzC,KAAG,yCAAH,EAA8C,YAAM;AAClD,QAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA,QAAMkC,KAAKP,KAAK8C,aAAL,CAAmB,CAAE,GAAF,EAAO,GAAP,CAAnB,CAAX;;AAEA7C,WAAOD,KAAKyC,KAAL,CAAWP,cAAX,CAA0B3B,EAA1B,CAAP,EAAsCwC,WAAtC;;AAEA/C,SAAKgD,SAAL;;AAEA/C,WAAOD,KAAKyC,KAAL,CAAWP,cAAX,CAA0B3B,EAA1B,CAAP,EAAsC0C,aAAtC;AACD,GATD;;AAWAlD,KAAG,mEAAH,EAAwE,YAAM;AAC5E,QAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,SAAKQ,GAAL,CAAS/B,eAAT;;AAEA;AACA,QAAMkE,sBAAsB7D,KAAKc,EAAL,EAA5B;AACA,QAAMgD,2BAA2B9D,KAAKc,EAAL,EAAjC;AACA;AACAI,SAAK2B,EAAL,CAAQ,YAAR,EAAsBgB,mBAAtB;AACA3C,SAAK2B,EAAL,CAAQ,cAAR,EAAwBiB,wBAAxB;;AAEA5C,SAAKkD,KAAL;;AAEA;AACAjD,WAAO0C,oBAAoB5D,IAApB,CAAyBqC,KAAzB,CAA+BP,MAAtC,EAA8CT,OAA9C,CAAsD,CAAtD;AACAH,WAAO2C,yBAAyB7D,IAAzB,CAA8BqC,KAA9B,CAAoCP,MAA3C,EAAmDT,OAAnD,CAA2D,CAA3D;AACAH,WAAO2C,yBAAyB7D,IAAzB,CAA8BqC,KAA9B,CAAoC,CAApC,EAAuC,CAAvC,CAAP,EAAkDhB,OAAlD,CAA0D;AACxD2B,oBAAc,EAAEC,kBAAkB,KAApB,EAD0C;AAExDC,aAAO,EAFiD;AAGxDC,sBAAgB,EAHwC;AAIxDC,YAAM,EAAEC,UAAU,IAAZ,EAAkBC,SAAS,EAA3B,EAA+BC,MAAM,MAArC,EAJkD;AAKxDC,YAAM,EALkD;AAMxD5B,eAAS,EAN+C;AAOxD6B,qBAAe;AAPyC,KAA1D;AASAvC,WAAOD,KAAKW,OAAL,CAAaC,QAAb,CAAsB,CAAtB,EAAyBO,KAAzB,CAA+BG,SAA/B,CAAyCvC,IAAzC,CAA8CqC,KAA9C,CAAoDP,MAA3D,EAAmET,OAAnE,CACE,CADF;AAGD,GA5BD;;AA8BAnB,WAAS,cAAT,EAAyB,YAAM;AAC7Bc,OAAG,oEAAH,EAAyE,YAAM;AAC7E,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKmD,eAAL,CAAqB,UAACC,OAAD,EAAUC,QAAV,EAAuB;AAC1CrD,aAAKsD,aAAL,CAAmBD,QAAnB,EAA6B,EAAEE,KAAK,IAAP,EAA7B;AACD,OAFD;AAGAvD,WAAKwD,gBAAL,CAAsB,UAACJ,OAAD,EAAUC,QAAV,EAAuB;AAC3CrD,aAAKsD,aAAL,CAAmBD,QAAnB,EAA6B,EAAEI,MAAM,IAAR,EAA7B;AACD,OAFD;AAGAzD,WAAK0D,WAAL,CAAiB,UAACN,OAAD,EAAUC,QAAV,EAAuB;AACtCrD,aAAKsD,aAAL,CAAmBD,QAAnB,EAA6B,EAAEM,QAAQ,IAAV,EAA7B;AACD,OAFD;AAGA3D,WAAKkB,GAAL;AACA,aAAOlB,KAAK2D,MAAL,GAAcC,IAAd,CAAmB,UAACC,MAAD,EAAY;AACpC5D,eAAO4D,OAAON,GAAd,EAAmBO,IAAnB,CAAwB,IAAxB;AACA7D,eAAO4D,OAAOF,MAAd,EAAsBG,IAAtB,CAA2B,IAA3B;AACA7D,eAAO4D,OAAOJ,IAAd,EAAoBK,IAApB,CAAyB,IAAzB;AACD,OAJM,CAAP;AAKD,KAjBD;AAkBD,GAnBD;;AAqBA7E,WAAS,eAAT,EAA0B,YAAM;AAC9Bc,OAAG,2BAAH,EAAgC,YAAM;AACpC,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA,UAAM0F,eAAe,SAAfA,YAAe,GAAY,CAAE,CAAnC;AACA/D,WAAKmD,eAAL,CAAqBY,YAArB;AACA9D,aAAOD,KAAKgE,aAAL,CAAmB,CAAnB,CAAP,EAA8B5D,OAA9B,CAAsC2D,YAAtC;AACD,KALD;;AAOAhE,OAAG,8BAAH,EAAmC,YAAM;AACvC,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA,UAAM4F,gBAAgB,SAAhBA,aAAgB,GAAY,CAAE,CAApC;AACA,UAAMC,gBAAgB,SAAhBA,aAAgB,GAAY,CAAE,CAApC;AACA,UAAMC,gBAAgB,SAAhBA,aAAgB,GAAY,CAAE,CAApC;AACAnE,WAAKmD,eAAL,CAAqBc,aAArB;AACAjE,WAAKmD,eAAL,CAAqBe,aAArB;AACAlE,WAAKmD,eAAL,CAAqBgB,aAArB;AACAlE,aAAOD,KAAKgE,aAAL,CAAmBnD,MAA1B,EAAkCT,OAAlC,CAA0C,CAA1C;AACAJ,WAAKoE,kBAAL,CAAwBF,aAAxB;AACAjE,aAAOD,KAAKgE,aAAL,CAAmBnD,MAA1B,EAAkCT,OAAlC,CAA0C,CAA1C;AACD,KAXD;;AAaAL,OAAG,4DAAH,EAAiE,YAAM;AACrE,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA,UAAM4F,gBAAgBnF,KAAKc,EAAL,EAAtB;AACA,UAAMsE,gBAAgBpF,KAAKc,EAAL,EAAtB;AACAI,WAAKmD,eAAL,CAAqBc,aAArB;AACAjE,WAAKmD,eAAL,CAAqBe,aAArB;;AAEA,aAAOlE,KACJqE,OADI,CACI;AACPC,gBAAQ,MADD;AAEPnE,cAAM,SAFC;AAGPmC,cAAM,YAHC;AAIPiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,OADJ,EAOJ4E,IAPI,CAOC;AAAA,eAAM5D,KAAK2D,MAAL,EAAN;AAAA,OAPD,EAQJC,IARI,CAQC,YAAM;AACV,YAAMa,SAAShE,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8B,CAA9B,CAAf;AACAhC,eAAOgE,cAAclF,IAAd,CAAmBqC,KAAnB,CAAyBP,MAAhC,EAAwCT,OAAxC,CAAgD,CAAhD;;AAEAH,eAAOgE,cAAclF,IAAd,CAAmBqC,KAAnB,CAAyB,CAAzB,EAA4B,CAA5B,EAA+BP,MAAtC,EAA8CT,OAA9C,CAAsD,CAAtD;AACAH,eAAOgE,cAAclF,IAAd,CAAmBqC,KAAnB,CAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,CAAP,EAA0ChB,OAA1C,CAAkDqE,MAAlD;;AAEAxE,eAAOiE,cAAcnF,IAAd,CAAmBqC,KAAnB,CAAyB,CAAzB,EAA4B,CAA5B,EAA+BP,MAAtC,EAA8CT,OAA9C,CAAsD,CAAtD;AACAH,eAAOiE,cAAcnF,IAAd,CAAmBqC,KAAnB,CAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,CAAP,EAA0ChB,OAA1C,CAAkDqE,MAAlD;AACD,OAjBI,CAAP;AAkBD,KAzBD;;AA2BA1E,OAAG,+EAAH,EAAoF,YAAM;AACxF,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKkB,GAAL;AACA,aAAOlB,KACJqE,OADI,CACI;AACPC,gBAAQ,MADD;AAEPnE,cAAM,SAFC;AAGPmC,cAAM,YAHC;AAIPiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,OADJ,EAOJ4E,IAPI,CAOC,YAAM;AACV,YAAMa,SAAShE,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8B,CAA9B,CAAf;AACA,YAAMyC,OAAO1E,KAAK2E,OAAL,CAAaF,MAAb,CAAb;AACAzE,aAAK4E,IAAL,CAAU,qBAAV,EAAiCF,IAAjC,EAAuC;AACrCG,gBAAM,aAD+B;AAErCxC,mBAAS,WAF4B;AAGrCyC,iBAAO;AAH8B,SAAvC;AAKA7E,eAAOD,KAAKyC,KAAL,CAAWR,KAAX,CAAiBwC,MAAjB,EAAyBM,QAAhC,EAA0C3E,OAA1C,CAAkD;AAChD4E,sBAAY,CADoC;AAEhDC,yBAAe,CAFiC;AAGhDC,sBAAY,KAHoC;AAIhDC,0BAAgB,KAJgC;AAKhDC,yBAAe,KALiC;AAMhDC,sBAAY,EAAER,MAAM,aAAR,EAAuBxC,SAAS,WAAhC,EAA6CyC,OAAO,CAApD;AANoC,SAAlD;AAQD,OAvBI,CAAP;AAwBD,KA3BD;;AA6BA/E,OAAG,+EAAH,EAAoF,YAAM;AACxF,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKkB,GAAL;AACA,aAAOlB,KACJqE,OADI,CACI;AACPC,gBAAQ,MADD;AAEPnE,cAAM,SAFC;AAGPmC,cAAM,YAHC;AAIPiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,OADJ,EAOJ4E,IAPI,CAOC,YAAM;AACV,YAAM0B,SAAS7E,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8B,CAA9B,CAAf;AACA,YAAMyC,OAAO1E,KAAKyC,KAAL,CAAWR,KAAX,CAAiBqD,MAAjB,CAAb;AACAtF,aAAK4E,IAAL,CAAU,qBAAV,EAAiCF,IAAjC,EAAuC;AACrCG,gBAAM,aAD+B;AAErCxC,mBAAS,WAF4B;AAGrCyC,iBAAO;AAH8B,SAAvC;AAKA7E,eAAOD,KAAKyC,KAAL,CAAWR,KAAX,CAAiBqD,MAAjB,EAAyBP,QAAhC,EAA0C3E,OAA1C,CAAkD;AAChD4E,sBAAY,CADoC;AAEhDC,yBAAe,CAFiC;AAGhDC,sBAAY,KAHoC;AAIhDC,0BAAgB,KAJgC;AAKhDC,yBAAe;AALiC,SAAlD;AAOD,OAtBI,CAAP;AAuBD,KA1BD;AA2BD,GAxGD;;AA0GAnG,WAAS,gBAAT,EAA2B,YAAM;AAC/Bc,OAAG,4BAAH,EAAiC,YAAM;AACrC,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA,UAAMkH,gBAAgB,SAAhBA,aAAgB,GAAY,CAAE,CAApC;AACAvF,WAAKwD,gBAAL,CAAsB+B,aAAtB;AACAtF,aAAOD,KAAKwF,cAAL,CAAoB,CAApB,CAAP,EAA+BpF,OAA/B,CAAuCmF,aAAvC;AACD,KALD;;AAOAxF,OAAG,+BAAH,EAAoC,YAAM;AACxC,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA,UAAMoH,iBAAiB,SAAjBA,cAAiB,GAAY,CAAE,CAArC;AACA,UAAMC,iBAAiB,SAAjBA,cAAiB,GAAY,CAAE,CAArC;AACA,UAAMC,iBAAiB,SAAjBA,cAAiB,GAAY,CAAE,CAArC;AACA3F,WAAKwD,gBAAL,CAAsBiC,cAAtB;AACAzF,WAAKwD,gBAAL,CAAsBkC,cAAtB;AACA1F,WAAKwD,gBAAL,CAAsBmC,cAAtB;AACA1F,aAAOD,KAAKwF,cAAL,CAAoB3E,MAA3B,EAAmCT,OAAnC,CAA2C,CAA3C;AACAJ,WAAK4F,mBAAL,CAAyBF,cAAzB;AACAzF,aAAOD,KAAKwF,cAAL,CAAoB3E,MAA3B,EAAmCT,OAAnC,CAA2C,CAA3C;AACD,KAXD;;AAaAL,OAAG,6DAAH,EAAkE,YAAM;AACtE,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA,UAAMoH,iBAAiB3G,KAAKc,EAAL,EAAvB;AACA,UAAM8F,iBAAiB5G,KAAKc,EAAL,EAAvB;AACAI,WAAKwD,gBAAL,CAAsBiC,cAAtB;AACAzF,WAAKwD,gBAAL,CAAsBkC,cAAtB;;AAEA,aAAO1F,KACJqE,OADI,CACI;AACPC,gBAAQ,MADD;AAEPnE,cAAM,SAFC;AAGPmC,cAAM,YAHC;AAIPiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,OADJ,EAOJ4E,IAPI,CAOC;AAAA,eAAM5D,KAAK2D,MAAL,EAAN;AAAA,OAPD,EAQJC,IARI,CAQC,YAAM;AACV3D,eAAOwF,eAAe1G,IAAf,CAAoBqC,KAApB,CAA0BP,MAAjC,EAAyCT,OAAzC,CAAiD,CAAjD;AACA;AACA;AACA,YAAMqE,SAAS,mBAAf;;AAEAxE,eAAOwF,eAAe1G,IAAf,CAAoBqC,KAApB,CAA0B,CAA1B,EAA6B,CAA7B,EAAgCP,MAAvC,EAA+CT,OAA/C,CAAuD,CAAvD;AACAH,eAAOwF,eAAe1G,IAAf,CAAoBqC,KAApB,CAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmCyE,SAAnC,CAA6C,CAA7C,EAAgD,EAAhD,CAAP,EAA4DzF,OAA5D,CACEqE,OAAOoB,SAAP,CAAiB,CAAjB,EAAoB,EAApB,CADF;;AAIA5F,eAAOyF,eAAe3G,IAAf,CAAoBqC,KAApB,CAA0B,CAA1B,EAA6B,CAA7B,EAAgCP,MAAvC,EAA+CT,OAA/C,CAAuD,CAAvD;AACAH,eAAOyF,eAAe3G,IAAf,CAAoBqC,KAApB,CAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmCyE,SAAnC,CAA6C,CAA7C,EAAgD,EAAhD,CAAP,EAA4DzF,OAA5D,CACEqE,OAAOoB,SAAP,CAAiB,CAAjB,EAAoB,EAApB,CADF;AAGD,OAvBI,CAAP;AAwBD,KA/BD;;AAiCA9F,OAAG,gFAAH,EAAqF,YAAM;AACzF,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKkB,GAAL;AACA,aAAOlB,KACJqE,OADI,CACI;AACPC,gBAAQ,MADD;AAEPnE,cAAM,SAFC;AAGPmC,cAAM,YAHC;AAIPiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,OADJ,EAOJ4E,IAPI,CAOC,YAAM;AACV,YAAMa,SAAShE,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8B,CAA9B,CAAf;AACA,YAAMyC,OAAO1E,KAAK2E,OAAL,CAAaF,MAAb,CAAb;AACAzE,aAAK4E,IAAL,CAAU,sBAAV,EAAkCF,IAAlC,EAAwC;AACtCG,gBAAM,aADgC;AAEtCxC,mBAAS,WAF6B;AAGtCyC,iBAAO;AAH+B,SAAxC;AAKA7E,eAAOD,KAAKyC,KAAL,CAAWR,KAAX,CAAiBwC,MAAjB,EAAyBM,QAAhC,EAA0C3E,OAA1C,CAAkD;AAChD4E,sBAAY,CADoC;AAEhDC,yBAAe,CAFiC;AAGhDC,sBAAY,KAHoC;AAIhDC,0BAAgB,KAJgC;AAKhDC,yBAAe,KALiC;AAMhDU,uBAAa,EAAEjB,MAAM,aAAR,EAAuBxC,SAAS,WAAhC,EAA6CyC,OAAO,CAApD;AANmC,SAAlD;AAQD,OAvBI,CAAP;AAwBD,KA3BD;;AA6BA/E,OAAG,gFAAH,EAAqF,YAAM;AACzF,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKkB,GAAL;AACA,aAAOlB,KACJqE,OADI,CACI;AACPC,gBAAQ,MADD;AAEPnE,cAAM,SAFC;AAGPmC,cAAM,YAHC;AAIPiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,OADJ,EAOJ4E,IAPI,CAOC,YAAM;AACV,YAAMa,SAAShE,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8B,CAA9B,CAAf;AACA,YAAMyC,OAAO1E,KAAKyC,KAAL,CAAWR,KAAX,CAAiBwC,MAAjB,CAAb;AACAzE,aAAK4E,IAAL,CAAU,sBAAV,EAAkCF,IAAlC,EAAwC;AACtCG,gBAAM,aADgC;AAEtCxC,mBAAS,WAF6B;AAGtCyC,iBAAO;AAH+B,SAAxC;AAKA7E,eAAOD,KAAKyC,KAAL,CAAWR,KAAX,CAAiBwC,MAAjB,EAAyBM,QAAhC,EAA0C3E,OAA1C,CAAkD;AAChD4E,sBAAY,CADoC;AAEhDC,yBAAe,CAFiC;AAGhDC,sBAAY,KAHoC;AAIhDC,0BAAgB,KAJgC;AAKhDC,yBAAe;AALiC,SAAlD;AAOD,OAtBI,CAAP;AAuBD,KA1BD;AA2BD,GA9GD;;AAgHAnG,WAAS,WAAT,EAAsB,YAAM;AAC1Bc,OAAG,wBAAH,EAA6B,YAAM;AACjC,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA,UAAM0H,WAAW,SAAXA,QAAW,GAAY,CAAE,CAA/B;AACA/F,WAAK0D,WAAL,CAAiBqC,QAAjB;AACA9F,aAAOD,KAAKgG,SAAL,CAAe,CAAf,CAAP,EAA0B5F,OAA1B,CAAkC2F,QAAlC;AACD,KALD;;AAOAhG,OAAG,2BAAH,EAAgC,YAAM;AACpC,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA,UAAM4H,YAAY,SAAZA,SAAY,GAAY,CAAE,CAAhC;AACA,UAAMC,YAAY,SAAZA,SAAY,GAAY,CAAE,CAAhC;AACA,UAAMC,YAAY,SAAZA,SAAY,GAAY,CAAE,CAAhC;AACAnG,WAAK0D,WAAL,CAAiBuC,SAAjB;AACAjG,WAAK0D,WAAL,CAAiBwC,SAAjB;AACAlG,WAAK0D,WAAL,CAAiByC,SAAjB;AACAlG,aAAOD,KAAKgG,SAAL,CAAenF,MAAtB,EAA8BT,OAA9B,CAAsC,CAAtC;AACAJ,WAAKoG,cAAL,CAAoBF,SAApB;AACAjG,aAAOD,KAAKgG,SAAL,CAAenF,MAAtB,EAA8BT,OAA9B,CAAsC,CAAtC;AACD,KAXD;AAYD,GApBD;;AAsBAnB,WAAS,eAAT,EAA0B,YAAM;AAC9Bc,OAAG,8FAAH,EAAmG,YAAM;AACvG,UAAMsG,oBAAoBvH,KAAKc,EAAL,CAAQ,iBAAS;AACzC,eAAO,SAAQH,OAAR,EAAP;AACD,OAFyB,CAA1B;AAGA,UAAMO,OAAO,IAAI3B,IAAJ,CAAS;AACpBgI;AADoB,OAAT,CAAb;AAGA,aAAOrG,KACJqE,OADI,CACI;AACPC,gBAAQ,MADD;AAEPnE,cAAM,SAFC;AAGPmC,cAAM,YAHC;AAIPiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,OADJ,EAOJ4E,IAPI,CAOC,YAAM;AACV3D,eAAOoG,kBAAkBtH,IAAlB,CAAuBqC,KAAvB,CAA6BP,MAApC,EAA4CT,OAA5C,CAAoD,CAApD;AACAH,eAAOoG,kBAAkBtH,IAAlB,CAAuBqC,KAAvB,CAA6B,CAA7B,EAAgC,CAAhC,EAAmCjB,IAA1C,EAAgDC,OAAhD,CAAwD,SAAxD;AACAH,eAAOoG,kBAAkBtH,IAAlB,CAAuBqC,KAAvB,CAA6B,CAA7B,EAAgC,CAAhC,CAAP,EAA2ChB,OAA3C,CAAmD,EAAnD;AACD,OAXI,CAAP;AAYD,KAnBD;;AAqBAL,OAAG,mBAAH,EAAwB,YAAM;AAC5B,UAAMuG,WAAW/H,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC,CAAjB;AACA,UAAMuH,qBAAqBzH,KAAKc,EAAL,EAA3B;AACA,UAAMI,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKkB,GAAL;AACAlB,WAAK2B,EAAL,CAAQ,YAAR,EAAsB4E,kBAAtB;AACA,aAAOvG,KACJqE,OADI,CACI;AACPC,gBAAQ,MADD;AAEPnE,cAAM,SAFC;AAGPmC,cAAM,YAHC;AAIPiC,cAAM+B;AAJC,OADJ,EAOJ1C,IAPI,CAOC,YAAM;AACV,YAAMa,SAAShE,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8B,CAA9B,CAAf;AACA,YAAMuE,UAAU;AACdC,qBAAW,KADG;AAEdlG,cAAIkE,MAFU;AAGdiC,oBAAU,KAHI;AAIdnE,gBAAM,EAAEpC,MAAM,SAAR,EAAmBmC,MAAM,YAAzB,EAJQ;AAKdnC,gBAAM,SALQ;AAMdwG,mBAASC,SANK;AAOdrC,gBAAM+B,QAPQ;AAQdvB,oBAAU;AACRG,wBAAY,KADJ;AAERD,2BAAe,CAFP;AAGRD,wBAAY,CAHJ;AAIRG,4BAAgB,KAJR;AAKRC,2BAAe;AALP,WARI;AAedyB,kBAAQ,EAfM;AAgBdC,gBAAM,KAhBQ;AAiBdxC,kBAAQ,MAjBM;AAkBdhC,gBAAM;AAlBQ,SAAhB;AAoBArC,eAAOD,KAAKyC,KAAL,CAAWR,KAAX,CAAiBwC,MAAjB,CAAP,EAAiCrE,OAAjC,CAAyCoG,OAAzC;AACAvG,eAAOsG,mBAAmBxH,IAAnB,CAAwBqC,KAAxB,CAA8B,CAA9B,EAAiC,CAAjC,CAAP,EAA4ChB,OAA5C,CAAoDoG,OAApD;AACD,OA/BI,CAAP;AAgCD,KAtCD;;AAwCAzG,OAAG,6DAAH,EAAkE,YAAM;AACtE,UAAMC,OAAO,IAAI3B,IAAJ,CAAS;AACpB0I,sBAAc;AACZC,4BAAkB,CAAC,WAAD;AADN;AADM,OAAT,CAAb;AAKA,aAAOhH,KACJqE,OADI,CACI;AACPC,gBAAQ,MADD;AAEPnE,cAAM,SAFC;AAGPmC,cAAM,YAHC;AAIPiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,OADJ,EAOJ4E,IAPI,CAOC,YAAM;AACV,cAAM,IAAIqD,KAAJ,CAAU,0BAAV,CAAN;AACD,OATI,EAUJC,KAVI,CAUE,aAAK;AACVjH,eAAOkH,EAAE9E,OAAT,EAAkBjC,OAAlB,CAA0B,gCAA1B;AACD,OAZI,CAAP;AAaD,KAnBD;;AAqBAL,OAAG,wEAAH,EAA6E,YAAM;AACjF,UAAMC,OAAO,IAAI3B,IAAJ,CAAS;AACpBgI,yBADoB,+BACC;AACnB,iBAAO,SAAQe,MAAR,CAAe,gBAAf,CAAP,CADmB,CACqB;AACzC;AAHmB,OAAT,CAAb;AAKA,aAAOnH,OAAOD,KAAKqE,OAAL,CAAa;AACzBC,gBAAQ,MADiB;AAEzBnE,cAAM,SAFmB;AAGzBmC,cAAM,YAHmB;AAIzBiC,cAAM;AAJmB,OAAb,CAAP,EAKH8C,OALG,CAKKC,aALL,CAKmB,IAAIL,KAAJ,CAAU,gBAAV,CALnB,CAAP;AAMD,KAZD;AAaD,GAhGD;;AAkGAhI,WAAS,kBAAT,EAA6B,YAAM;AACjCc,OAAG,qEAAH,EAA0E,YAAM;AAC9E,UAAMC,OAAO,IAAI3B,IAAJ,GAAW6C,GAAX,EAAb;AACAlB,WAAK0D,WAAL,CAAiB,UAACN,OAAD;AAAA,eAAa,SAAQ3D,OAAR,EAAb;AAAA,OAAjB;AACA,aAAO,SAAQ8H,GAAR,CAAY,CACjBvH,KAAKqE,OAAL,CAAa,EAAEC,QAAQ,MAAV,EAAkBnE,MAAM,SAAxB,EAAmCmC,MAAM,YAAzC,EAAuDiC,MAAM,IAAIiD,UAAJ,EAA7D,EAAb,CADiB,EAEjBxH,KAAKqE,OAAL,CAAa,EAAEC,QAAQ,MAAV,EAAkBnE,MAAM,SAAxB,EAAmCmC,MAAM,YAAzC,EAAuDiC,MAAM,IAAIiD,UAAJ,EAA7D,EAAb,CAFiB,CAAZ,EAGJ5D,IAHI,CAGC,YAAM;AACZ,eAAO3D,OAAOD,KAAK2D,MAAL,EAAP,EAAsB8D,QAAtB,CAA+BH,aAA/B,CAA6C;AAClDI,sBAAY,CACV,EAAEvH,MAAM,SAAR,EADU,EAEV,EAAEA,MAAM,SAAR,EAFU,CADsC;AAKlDwH,kBAAQ;AAL0C,SAA7C,CAAP;AAOD,OAXM,CAAP;AAYD,KAfD;;AAiBA5H,OAAG,uDAAH,EAA4D,YAAM;AAChE,UAAMC,OAAO,IAAI3B,IAAJ,GAAW6C,GAAX,EAAb;AACAlB,WAAK0D,WAAL,CAAiB,UAACN,OAAD,EAAa;AAC5BA,gBAAQwE,OAAR,CAAgB,UAACtC,MAAD,EAAY;AAC1B,cAAMZ,OAAO1E,KAAK2E,OAAL,CAAaW,MAAb,CAAb;AACA,cAAI,MAAMuC,IAAN,CAAWnD,KAAKvE,IAAhB,CAAJ,EAA2B;AACzBH,iBAAK4E,IAAL,CAAU,cAAV,EAA0BF,IAA1B,EAAgC,IAAIuC,KAAJ,CAAU,mCAAV,CAAhC;AACD;AACF,SALD;AAMA,eAAO,SAAQxH,OAAR,EAAP;AACD,OARD;;AAUA,aAAO,SAAQ8H,GAAR,CAAY,CACjBvH,KAAKqE,OAAL,CAAa,EAAEC,QAAQ,MAAV,EAAkBnE,MAAM,SAAxB,EAAmCmC,MAAM,YAAzC,EAAuDiC,MAAM,IAAIiD,UAAJ,EAA7D,EAAb,CADiB,EAEjBxH,KAAKqE,OAAL,CAAa,EAAEC,QAAQ,MAAV,EAAkBnE,MAAM,SAAxB,EAAmCmC,MAAM,YAAzC,EAAuDiC,MAAM,IAAIiD,UAAJ,EAA7D,EAAb,CAFiB,CAAZ,EAGJ5D,IAHI,CAGC,YAAM;AACZ,eAAO3D,OAAOD,KAAK2D,MAAL,EAAP,EAAsB8D,QAAtB,CAA+BH,aAA/B,CAA6C;AAClDI,sBAAY,CACV,EAAEvH,MAAM,SAAR,EADU,CADsC;AAIlDwH,kBAAQ,CACN,EAAExH,MAAM,SAAR,EAAmB2H,OAAO,mCAA1B,EADM;AAJ0C,SAA7C,CAAP;AAQD,OAZM,CAAP;AAaD,KAzBD;;AA2BA/H,OAAG,6EAAH,EAAkF,YAAM;AACtF,UAAMC,OAAO,IAAI3B,IAAJ,GAAW6C,GAAX,EAAb;AACAlB,WAAK+H,KAAL,CAAWtF,KAAX,CAAiBP,cAAjB,GAAkC;AAChC8F,iBAAS;AACP5E,mBAAS,CAAC,0BAAD,EAA6B,0BAA7B,EAAyD,0BAAzD;AADF,SADuB;AAIhC6E,iBAAS;AACP7E,mBAAS,CAAC,0BAAD,EAA6B,0BAA7B,EAAyD,0BAAzD;AADF;AAJuB,OAAlC;AAQApD,WAAK0D,WAAL,CAAiB,UAACN,OAAD;AAAA,eAAa,SAAQ3D,OAAR,EAAb;AAAA,OAAjB;AACA,aAAO,SAAQ8H,GAAR,CAAY,CACjBvH,KAAKqE,OAAL,CAAa,EAAEC,QAAQ,MAAV,EAAkBnE,MAAM,SAAxB,EAAmCmC,MAAM,YAAzC,EAAuDiC,MAAM,IAAIiD,UAAJ,EAA7D,EAAb,CADiB,EAEjBxH,KAAKqE,OAAL,CAAa,EAAEC,QAAQ,MAAV,EAAkBnE,MAAM,SAAxB,EAAmCmC,MAAM,YAAzC,EAAuDiC,MAAM,IAAIiD,UAAJ,EAA7D,EAAb,CAFiB,EAGjBxH,KAAKqE,OAAL,CAAa,EAAEC,QAAQ,OAAV,EAAmBnE,MAAM,WAAzB,EAAsCmC,MAAM,YAA5C,EAA0DiC,MAAM,IAAIiD,UAAJ,EAAhE,EAAb,CAHiB,CAAZ,EAIJ5D,IAJI,CAIC,YAAM;AACZ,eAAO5D,KAAK2D,MAAL,EAAP;AACD,OANM,EAMJC,IANI,CAMC,UAACC,MAAD,EAAY;AAClB5D,eAAO4D,MAAP,EAAeqE,eAAf;AACD,OARM,CAAP;AASD,KApBD;AAqBD,GAlED;;AAoEAjJ,WAAS,iBAAT,EAA4B,YAAM;AAChCc,OAAG,wBAAH,EAA6B,YAAM;AACjC,UAAMoI,uBAAuBrJ,KAAKc,EAAL,EAA7B;;AAEA,UAAMI,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAK2B,EAAL,CAAQ,cAAR,EAAwBwG,oBAAxB;AACAnI,WAAKkB,GAAL;AACA,aAAOlB,KACJqE,OADI,CACI;AACPC,gBAAQ,MADD;AAEPnE,cAAM,SAFC;AAGPmC,cAAM,YAHC;AAIPiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,OADJ,EAOJ4E,IAPI,CAOC,YAAM;AACV,YAAMa,SAAShE,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8B,CAA9B,CAAf;AACAhC,eAAOQ,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8BpB,MAArC,EAA6CT,OAA7C,CAAqD,CAArD;AACAJ,aAAK4B,QAAL,CAAc;AACZY,yBAAe;AADH,SAAd;;AAIA,YAAMkC,OAAO1E,KAAK2E,OAAL,CAAaF,MAAb,CAAb;AACAzE,aAAKoI,UAAL,CAAgB3D,MAAhB;;AAEAxE,eAAOQ,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8BpB,MAArC,EAA6CT,OAA7C,CAAqD,CAArD;AACAH,eAAOkI,qBAAqBpJ,IAArB,CAA0BqC,KAA1B,CAAgC,CAAhC,EAAmC,CAAnC,CAAP,EAA8ChB,OAA9C,CAAsDsE,IAAtD;AACAzE,eAAOD,KAAKyC,KAAL,CAAWD,aAAlB,EAAiCpC,OAAjC,CAAyC,CAAzC;AACD,OApBI,CAAP;AAqBD,KA3BD;AA4BD,GA7BD;;AA+BAnB,WAAS,kBAAT,EAA6B,YAAM;AACjCoJ,QAAI,uBAAJ,EAA6B,YAAM,CAAE,CAArC;;AAEAA,QAAI,mDAAJ,EAAyD,YAAM,CAAE,CAAjE;AACD,GAJD;;AAMApJ,WAAS,YAAT,EAAuB,YAAM;AAC3Bc,OAAG,+BAAH,EAAoC,YAAM;AACxC,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA,aAAO2B,KACJqE,OADI,CACI;AACPC,gBAAQ,MADD;AAEPnE,cAAM,SAFC;AAGPmC,cAAM,YAHC;AAIPiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,OADJ,EAOJ4E,IAPI,CAOC,YAAM;AACV,YAAMa,SAAShE,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8B,CAA9B,CAAf;AACAhC,eAAOD,KAAK2E,OAAL,CAAaF,MAAb,EAAqBtE,IAA5B,EAAkCC,OAAlC,CAA0C,SAA1C;;AAEAH,eAAOD,KAAK2E,OAAL,CAAa,mBAAb,CAAP,EAA0CvE,OAA1C,CAAkDwG,SAAlD;AACD,OAZI,CAAP;AAaD,KAfD;AAgBD,GAjBD;;AAmBA3H,WAAS,WAAT,EAAsB,YAAM;AAC1Bc,OAAG,yCAAH,EAA8C,YAAM;AAClD,UAAMC,OAAO,IAAI3B,IAAJ,CAAS;AACpBkE,cAAM,EAAE+F,MAAM,MAAR;AADc,OAAT,CAAb;AAGAtI,WAAKuI,OAAL,CAAa,EAAE/G,KAAK,KAAP,EAAcgH,KAAK,KAAnB,EAAb;AACAxI,WAAKuI,OAAL,CAAa,EAAEE,KAAK,KAAP,EAAcD,KAAK,KAAnB,EAAb;AACAvI,aAAOD,KAAKyC,KAAL,CAAWF,IAAlB,EAAwBnC,OAAxB,CAAgC;AAC9BoB,aAAK,KADyB;AAE9B8G,cAAM,MAFwB;AAG9BG,aAAK,KAHyB;AAI9BD,aAAK;AAJyB,OAAhC;AAMD,KAZD;;AAcAzI,OAAG,0DAAH,EAA+D,YAAM;AACnE,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA,aAAO2B,KACJqE,OADI,CACI;AACPC,gBAAQ,MADD;AAEPnE,cAAM,SAFC;AAGPmC,cAAM,YAHC;AAIPiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,OADJ,EAOJ4E,IAPI,CAOC,YAAM;AACV,YAAMa,SAAShE,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8B,CAA9B,CAAf;AACAjC,aAAK0I,WAAL,CAAiBjE,MAAjB,EAAyB,EAAEjD,KAAK,KAAP,EAAcgH,KAAK,KAAnB,EAAzB;AACAxI,aAAK0I,WAAL,CAAiBjE,MAAjB,EAAyB,EAAEgE,KAAK,KAAP,EAAcD,KAAK,KAAnB,EAAzB;AACAvI,eAAOD,KAAKyC,KAAL,CAAWR,KAAX,CAAiBwC,MAAjB,EAAyBlC,IAAhC,EAAsCnC,OAAtC,CAA8C;AAC5CD,gBAAM,SADsC;AAE5CmC,gBAAM,YAFsC;AAG5Cd,eAAK,KAHuC;AAI5CgH,eAAK,KAJuC;AAK5CC,eAAK;AALuC,SAA9C;AAOD,OAlBI,CAAP;AAmBD,KArBD;AAsBD,GArCD;;AAuCAxJ,WAAS,UAAT,EAAqB,YAAM;AACzBc,OAAG,gDAAH,EAAqD,YAAM;AACzD,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA,aAAO2B,KACJqE,OADI,CACI;AACPC,gBAAQ,MADD;AAEPnE,cAAM,SAFC;AAGPmC,cAAM,YAHC;AAIPiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,OADJ,EAOJ4E,IAPI,CAOC,YAAM;AACV,YAAMa,SAAShE,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8B,CAA9B,CAAf;AACA,YAAMyC,OAAO1E,KAAK2E,OAAL,CAAaF,MAAb,CAAb;AACAzE,aAAK2I,kBAAL,CAAwBjE,IAAxB,EAA8B;AAC5BO,yBAAe,KADa;AAE5BC,sBAAY;AAFgB,SAA9B;AAIAjF,eAAOD,KAAKyC,KAAL,CAAWR,KAAX,CAAiBwC,MAAjB,EAAyBM,QAAhC,EAA0C3E,OAA1C,CAAkD;AAChD4E,sBAAY,EADoC;AAEhDC,yBAAe,KAFiC;AAGhDC,sBAAY,KAHoC;AAIhDC,0BAAgB,KAJgC;AAKhDC,yBAAe;AALiC,SAAlD;;AAQApF,aAAK2I,kBAAL,CAAwBjE,IAAxB,EAA8B;AAC5BO,yBAAe,KADa;AAE5BC,sBAAY;AAFgB,SAA9B;AAIAjF,eAAOD,KAAKyC,KAAL,CAAWR,KAAX,CAAiBwC,MAAjB,EAAyBM,QAAhC,EAA0C3E,OAA1C,CAAkD;AAChD4E,sBAAY,GADoC;AAEhDC,yBAAe,KAFiC;AAGhDC,sBAAY,KAHoC;AAIhDC,0BAAgB,KAJgC;AAKhDC,yBAAe;AALiC,SAAlD;AAOD,OAjCI,CAAP;AAkCD,KApCD;;AAsCArF,OAAG,yDAAH,EAA8D,YAAM;AAClE,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA,aAAO2B,KACJqE,OADI,CACI;AACPC,gBAAQ,MADD;AAEPnE,cAAM,SAFC;AAGPmC,cAAM,YAHC;AAIPiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,OADJ,EAOJ4E,IAPI,CAOC,YAAM;AACV,eAAO5D,KACJqE,OADI,CACI;AACPC,kBAAQ,MADD;AAEPnE,gBAAM,UAFC;AAGPmC,gBAAM,YAHC;AAIPiC,gBAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,SADJ,CAAP;AAOD,OAfI,EAeF4E,IAfE,CAeG,YAAM;AACZ,YAAMgF,UAAUnI,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8B,CAA9B,CAAhB;AACA,YAAM4G,UAAUpI,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8B,CAA9B,CAAhB;AACA,YAAM6G,QAAQ9I,KAAKyC,KAAL,CAAWR,KAAX,CAAiB2G,OAAjB,CAAd;AACA,YAAMG,QAAQ/I,KAAKyC,KAAL,CAAWR,KAAX,CAAiB4G,OAAjB,CAAd;AACA7I,aAAKyC,KAAL,CAAWR,KAAX,CAAiB2G,OAAjB,EAA0B7D,QAA1B,CAAmCK,aAAnC,GAAmD,IAAI4D,IAAJ,EAAnD;AACAhJ,aAAKyC,KAAL,CAAWR,KAAX,CAAiB4G,OAAjB,EAA0B9D,QAA1B,CAAmCK,aAAnC,GAAmD,IAAI4D,IAAJ,EAAnD;;AAEAhJ,aAAK2I,kBAAL,CAAwBG,KAAxB,EAA+B;AAC7B7D,yBAAe,KADc;AAE7BC,sBAAY;AAFiB,SAA/B;;AAKAlF,aAAK2I,kBAAL,CAAwBI,KAAxB,EAA+B;AAC7B9D,yBAAe,KADc;AAE7BC,sBAAY;AAFiB,SAA/B;;AAKAlF,aAAKiJ,uBAAL;AACAhJ,eAAOD,KAAKyC,KAAL,CAAWD,aAAlB,EAAiCpC,OAAjC,CAAyC,EAAzC;AACD,OAnCI,CAAP;AAoCD,KAtCD;;AAwCAL,OAAG,2BAAH,EAAgC,YAAM;AACpC,UAAMmJ,qBAAqBpK,KAAKc,EAAL,EAA3B;AACA,UAAMI,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKkB,GAAL;AACAlB,WAAK2B,EAAL,CAAQ,gBAAR,EAA0BuH,kBAA1B;AACA,aAAOlJ,KACJqE,OADI,CACI;AACPC,gBAAQ,MADD;AAEPnE,cAAM,SAFC;AAGPmC,cAAM,YAHC;AAIPiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,OADJ,EAOJ4E,IAPI,CAOC,YAAM;AACV,eAAO5D,KACJqE,OADI,CACI;AACPC,kBAAQ,MADD;AAEPnE,gBAAM,UAFC;AAGPmC,gBAAM,YAHC;AAIPiC,gBAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJC,SADJ,CAAP;AAOD,OAfI,EAeF4E,IAfE,CAeG,YAAM;AACZ,YAAMgF,UAAUnI,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8B,CAA9B,CAAhB;AACA,YAAM4G,UAAUpI,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,EAA8B,CAA9B,CAAhB;AACA,YAAM6G,QAAQ9I,KAAKyC,KAAL,CAAWR,KAAX,CAAiB2G,OAAjB,CAAd;AACA,YAAMG,QAAQ/I,KAAKyC,KAAL,CAAWR,KAAX,CAAiB4G,OAAjB,CAAd;AACA7I,aAAKyC,KAAL,CAAWR,KAAX,CAAiB2G,OAAjB,EAA0B7D,QAA1B,CAAmCK,aAAnC,GAAmD,IAAI4D,IAAJ,EAAnD;AACAhJ,aAAKyC,KAAL,CAAWR,KAAX,CAAiB4G,OAAjB,EAA0B9D,QAA1B,CAAmCK,aAAnC,GAAmD,IAAI4D,IAAJ,EAAnD;;AAEAhJ,aAAK2I,kBAAL,CAAwBG,KAAxB,EAA+B;AAC7B7D,yBAAe,KADc;AAE7BC,sBAAY;AAFiB,SAA/B;;AAKAlF,aAAK2I,kBAAL,CAAwBI,KAAxB,EAA+B;AAC7B9D,yBAAe,KADc;AAE7BC,sBAAY;AAFiB,SAA/B;;AAKAlF,aAAKiJ,uBAAL;;AAEAhJ,eAAOD,KAAKyC,KAAL,CAAWD,aAAlB,EAAiCpC,OAAjC,CAAyC,EAAzC;;AAEAJ,aAAKmJ,aAAL;;AAEAlJ,eAAOD,KAAKyC,KAAL,CAAWR,KAAX,CAAiB2G,OAAjB,EAA0B7D,QAAjC,EAA2C3E,OAA3C,CAAmD;AACjD4E,sBAAY,CADqC;AAEjDC,yBAAe,CAFkC;AAGjDC,sBAAY,KAHqC;AAIjDC,0BAAgB,KAJiC;AAKjDC,yBAAe;AALkC,SAAnD;AAOAnF,eAAOD,KAAKyC,KAAL,CAAWR,KAAX,CAAiB4G,OAAjB,EAA0B9D,QAAjC,EAA2C3E,OAA3C,CAAmD;AACjD4E,sBAAY,CADqC;AAEjDC,yBAAe,CAFkC;AAGjDC,sBAAY,KAHqC;AAIjDC,0BAAgB,KAJiC;AAKjDC,yBAAe;AALkC,SAAnD;AAOAnF,eAAOD,KAAKyC,KAAL,CAAWD,aAAlB,EAAiCpC,OAAjC,CAAyC,CAAzC;AACAH,eAAOiJ,mBAAmBnK,IAAnB,CAAwBqC,KAAxB,CAA8BP,MAArC,EAA6CT,OAA7C,CAAqD,CAArD;AACD,OAvDI,CAAP;AAwDD,KA7DD;AA8DD,GA7ID;;AA+IAnB,WAAS,mBAAT,EAA8B,YAAM;AAClCc,OAAG,0CAAH,EAA+C,YAAM;AACnD,UAAMC,OAAO,IAAI3B,IAAJ,CAAS;AACpB+K,qBAAa,KADO;AAEpBrC,sBAAc;AACZsC,4BAAkB;AADN;AAFM,OAAT,CAAb;;AAOA;AACArJ,WAAKqE,OAAL,CAAa;AACXC,gBAAQ,MADG;AAEXnE,cAAM,UAFK;AAGXmC,cAAM,YAHK;AAIXiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJK,OAAb;AAMA,aAAOiB,OAAOD,KAAKqE,OAAL,CAAa;AACzBC,gBAAQ,MADiB;AAEzBnE,cAAM,UAFmB;AAGzBmC,cAAM,YAHmB;AAIzBiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJmB,OAAb,CAAP,EAKHqI,OALG,CAKKC,aALL,CAKmB,IAAIL,KAAJ,CAAU,4BAAV,CALnB,EAK4DrD,IAL5D,CAKiE,YAAM;AAC5E3D,eAAOD,KAAKyC,KAAL,CAAWN,IAAX,CAAgBE,OAAvB,EAAgCjC,OAAhC,CAAwC,4BAAxC;AACD,OAPM,CAAP;AAQD,KAvBD;;AAyBAiI,QAAI,0CAAJ,EAAgD,YAAM,CAAE,CAAxD;;AAEAtI,OAAG,yCAAH,EAA8C,YAAM;AAClD,UAAMC,OAAO,IAAI3B,IAAJ,CAAS;AACpB+K,qBAAa,KADO;AAEpBrC,sBAAc;AACZC,4BAAkB,CAAC,WAAD,EAAc,WAAd;AADN;AAFM,OAAT,CAAb;;AAOA,aAAO/G,OAAOD,KAAKqE,OAAL,CAAa;AACzBC,gBAAQ,MADiB;AAEzBnE,cAAM,UAFmB;AAGzBmC,cAAM,YAHmB;AAIzBiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJmB,OAAb,CAAP,EAKHqI,OALG,CAKKC,aALL,CAKmB,IAAIL,KAAJ,CAAU,2CAAV,CALnB,EAK2ErD,IAL3E,CAKgF,YAAM;AAC3F3D,eAAOD,KAAKyC,KAAL,CAAWN,IAAX,CAAgBE,OAAvB,EAAgCjC,OAAhC,CAAwC,2CAAxC;AACD,OAPM,CAAP;AAQD,KAhBD;;AAkBAL,OAAG,qCAAH,EAA0C,YAAM;AAC9C,UAAMC,OAAO,IAAI3B,IAAJ,CAAS;AACpB+K,qBAAa,KADO;AAEpBrC,sBAAc;AACZuC,uBAAa;AADD;AAFM,OAAT,CAAb;;AAOA,aAAOrJ,OAAOD,KAAKqE,OAAL,CAAa;AACzBC,gBAAQ,MADiB;AAEzBnE,cAAM,SAFmB;AAGzBmC,cAAM,YAHmB;AAIzBiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJmB,OAAb,CAAP,EAKHqI,OALG,CAKKC,aALL,CAKmB,IAAIL,KAAJ,CAAU,kDAAV,CALnB,EAKkFrD,IALlF,CAKuF,YAAM;AAClG3D,eAAOD,KAAKyC,KAAL,CAAWN,IAAX,CAAgBE,OAAvB,EAAgCjC,OAAhC,CAAwC,kDAAxC;AACD,OAPM,CAAP;AAQD,KAhBD;AAiBD,GA/DD;;AAiEAnB,WAAS,SAAT,EAAoB,YAAM;AACxBc,OAAG,wDAAH,EAA6D,YAAM;AACjE,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKkB,GAAL;AACAlB,WAAK4E,IAAL,CAAU,OAAV,EAAmB,IAAIqC,KAAJ,CAAU,SAAV,CAAnB;AACAhH,aAAOD,KAAKyC,KAAL,CAAWqF,KAAlB,EAAyB1H,OAAzB,CAAiC,SAAjC;AACD,KALD;;AAOAL,OAAG,+DAAH,EAAoE,YAAM;AACxE,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKkB,GAAL;AACAlB,WAAKyC,KAAL,CAAWR,KAAX,CAAiB,QAAjB,IAA6B;AAC3B9B,cAAM;AADqB,OAA7B;AAGAH,WAAK4E,IAAL,CAAU,cAAV,EAA0B5E,KAAKyC,KAAL,CAAWR,KAAX,CAAiB,QAAjB,CAA1B,EAAsD,IAAIgF,KAAJ,CAAU,mBAAV,CAAtD;AACAhH,aAAOD,KAAKyC,KAAL,CAAWN,IAAlB,EAAwB/B,OAAxB,CAAgC,EAAC,WAAW,2BAAZ,EAAyC,WAAW,mBAApD,EAAyE,YAAY,KAArF,EAA4F,QAAQ,OAApG,EAAhC;AACD,KARD;;AAUAL,OAAG,8DAAH,EAAmE,YAAM;AACvE,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKkB,GAAL;AACAlB,WAAK4E,IAAL,CAAU,OAAV,EAAmB,EAAEpD,KAAK,KAAP,EAAnB;AACAxB,WAAK4E,IAAL,CAAU,QAAV;AACA3E,aAAOD,KAAKyC,KAAL,CAAWqF,KAAlB,EAAyB1H,OAAzB,CAAiC,IAAjC;AACD,KAND;AAOD,GAzBD;;AA2BAnB,WAAS,oBAAT,EAA+B,YAAM;AACnC,QAAMsK,sBAAsBpK,OAAOqK,MAAP,CAAcC,SAAd,CAAwBC,MAApD;;AAEA,aAASC,mBAAT,CAA8BC,MAA9B,EAAsC;AACpCnJ,aAAOoJ,cAAP,CACE1K,OAAOqK,MAAP,CAAcC,SADhB,EAEE,QAFF,EAGE;AACE3E,eAAO8E,MADT;AAEEE,kBAAU;AAFZ,OAHF;AAQD;;AAEDhK,cAAU,YAAM;AACdX,aAAOqK,MAAP,CAAcC,SAAd,CAAwBC,MAAxB,GAAiCH,mBAAjC;AACD,KAFD;;AAIAxJ,OAAG,8EAAH,EAAmF,YAAM;AACvF,UAAMgK,kBAAkBjL,KAAKc,EAAL,EAAxB;AACA,UAAMoK,mBAAmBlL,KAAKc,EAAL,EAAzB;AACA,UAAMqK,sBAAsBnL,KAAKc,EAAL,EAA5B;AACA,UAAMI,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAK2B,EAAL,CAAQ,YAAR,EAAsBqI,gBAAtB;AACAhK,WAAK2B,EAAL,CAAQ,WAAR,EAAqBoI,eAArB;AACA/J,WAAK2B,EAAL,CAAQ,aAAR,EAAuBsI,mBAAvB;;AAEAN,0BAAoB,IAApB;AACA3J,WAAKkK,kBAAL;AACAjK,aAAO8J,gBAAgBhL,IAAhB,CAAqBqC,KAArB,CAA2BP,MAAlC,EAA0CT,OAA1C,CAAkD,CAAlD;AACAH,aAAO+J,iBAAiBjL,IAAjB,CAAsBqC,KAAtB,CAA4BP,MAAnC,EAA2CT,OAA3C,CAAmD,CAAnD;AACAH,aAAOgK,oBAAoBlL,IAApB,CAAyBqC,KAAzB,CAA+BP,MAAtC,EAA8CT,OAA9C,CAAsD,CAAtD;;AAEAuJ,0BAAoB,KAApB;AACA3J,WAAKkK,kBAAL;AACAjK,aAAO8J,gBAAgBhL,IAAhB,CAAqBqC,KAArB,CAA2BP,MAAlC,EAA0CT,OAA1C,CAAkD,CAAlD;AACAH,aAAO+J,iBAAiBjL,IAAjB,CAAsBqC,KAAtB,CAA4BP,MAAnC,EAA2CT,OAA3C,CAAmD,CAAnD;AACAH,aAAOgK,oBAAoBlL,IAApB,CAAyBqC,KAAzB,CAA+BP,MAAtC,EAA8CT,OAA9C,CAAsD,CAAtD;;AAEAuJ,0BAAoB,IAApB;AACA3J,WAAKkK,kBAAL;AACAjK,aAAO8J,gBAAgBhL,IAAhB,CAAqBqC,KAArB,CAA2BP,MAAlC,EAA0CT,OAA1C,CAAkD,CAAlD;AACAH,aAAO+J,iBAAiBjL,IAAjB,CAAsBqC,KAAtB,CAA4BP,MAAnC,EAA2CT,OAA3C,CAAmD,CAAnD;AACAH,aAAOgK,oBAAoBlL,IAApB,CAAyBqC,KAAzB,CAA+BP,MAAtC,EAA8CT,OAA9C,CAAsD,CAAtD;AACD,KA1BD;AA2BD,GA7CD;;AA+CAnB,WAAS,MAAT,EAAiB,YAAM;AACrBc,OAAG,8DAAH,EAAmE,YAAM;AACvE,UAAMoK,mBAAmBrL,KAAKc,EAAL,EAAzB;AACA,UAAMI,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKkB,GAAL;AACAlB,WAAK2B,EAAL,CAAQ,cAAR,EAAwBwI,gBAAxB;;AAEAnK,WAAKmC,IAAL,CAAU,qBAAV,EAAiC,MAAjC,EAAyC,CAAzC;AACAlC,aAAOD,KAAKyC,KAAL,CAAWN,IAAlB,EAAwB/B,OAAxB,CAAgC;AAC9BgC,kBAAU,KADoB;AAE9BE,cAAM,MAFwB;AAG9BD,iBAAS,qBAHqB;AAI9B+H,iBAAS;AAJqB,OAAhC;AAMAnK,aAAOkK,iBAAiBpL,IAAjB,CAAsBqC,KAAtB,CAA4BP,MAAnC,EAA2CT,OAA3C,CAAmD,CAAnD;AACAH,qBAAcD,KAAKqK,aAAnB,GAAkCjK,OAAlC,CAA0C,WAA1C;AACD,KAfD;;AAiBAL,OAAG,8DAAH,EAAmE,YAAM;AACvE,UAAMoK,mBAAmBrL,KAAKc,EAAL,EAAzB;AACA,UAAMI,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKkB,GAAL;AACAlB,WAAK2B,EAAL,CAAQ,cAAR,EAAwBwI,gBAAxB;;AAEAnK,WAAKmC,IAAL,CAAU;AACRE,iBAAS,qBADD;AAER+H,iBAAS;AACP5I,eAAK;AADE;AAFD,OAAV,EAKG,SALH,EAKc,CALd;AAMAvB,aAAOD,KAAKyC,KAAL,CAAWN,IAAlB,EAAwB/B,OAAxB,CAAgC;AAC9BgC,kBAAU,KADoB;AAE9BE,cAAM,SAFwB;AAG9BD,iBAAS,qBAHqB;AAI9B+H,iBAAS;AACP5I,eAAK;AADE;AAJqB,OAAhC;AAQAvB,aAAOkK,iBAAiBpL,IAAjB,CAAsBqC,KAAtB,CAA4BP,MAAnC,EAA2CT,OAA3C,CAAmD,CAAnD;AACAH,qBAAcD,KAAKqK,aAAnB,GAAkCjK,OAAlC,CAA0C,WAA1C;AACD,KAtBD;;AAwBAL,OAAG,+EAAH,EAAoF,UAACuK,IAAD,EAAU;AAC5F,UAAMH,mBAAmBrL,KAAKc,EAAL,EAAzB;AACA,UAAM2K,kBAAkBzL,KAAKc,EAAL,EAAxB;AACA,UAAMI,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKkB,GAAL;AACAlB,WAAK2B,EAAL,CAAQ,cAAR,EAAwBwI,gBAAxB;AACAnK,WAAK2B,EAAL,CAAQ,aAAR,EAAuB4I,eAAvB;;AAEAvK,WAAKmC,IAAL,CAAU,qBAAV,EAAiC,MAAjC,EAAyC,GAAzC;AACAlC,qBAAcD,KAAKqK,aAAnB,GAAkCjK,OAAlC,CAA0C,QAA1C;AACAH,aAAOsK,gBAAgBxL,IAAhB,CAAqBqC,KAArB,CAA2BP,MAAlC,EAA0CT,OAA1C,CAAkD,CAAlD;AACAoK,iBAAW,YAAM;AACfvK,eAAOsK,gBAAgBxL,IAAhB,CAAqBqC,KAArB,CAA2BP,MAAlC,EAA0CT,OAA1C,CAAkD,CAAlD;AACAH,eAAOD,KAAKyC,KAAL,CAAWN,IAAlB,EAAwB/B,OAAxB,CAAgC;AAC9BgC,oBAAU,IADoB;AAE9BE,gBAAM,MAFwB;AAG9BD,mBAAS,qBAHqB;AAI9B+H,mBAAS;AAJqB,SAAhC;AAMAE;AACD,OATD,EASG,GATH;AAUD,KArBD;;AAuBAvK,OAAG,6BAAH,EAAkC,YAAM;AACtC,UAAMoK,mBAAmBrL,KAAKc,EAAL,EAAzB;AACA,UAAM2K,kBAAkBzL,KAAKc,EAAL,EAAxB;AACA,UAAMI,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKkB,GAAL;AACAlB,WAAK2B,EAAL,CAAQ,cAAR,EAAwBwI,gBAAxB;AACAnK,WAAK2B,EAAL,CAAQ,aAAR,EAAuB4I,eAAvB;;AAEAvK,WAAKmC,IAAL,CAAU,qBAAV,EAAiC,MAAjC,EAAyC,CAAzC;AACAlC,qBAAcD,KAAKqK,aAAnB,GAAkCjK,OAAlC,CAA0C,WAA1C;AACAH,aAAOsK,gBAAgBxL,IAAhB,CAAqBqC,KAArB,CAA2BP,MAAlC,EAA0CT,OAA1C,CAAkD,CAAlD;AACAJ,WAAKyK,QAAL;AACAxK,aAAOsK,gBAAgBxL,IAAhB,CAAqBqC,KAArB,CAA2BP,MAAlC,EAA0CT,OAA1C,CAAkD,CAAlD;AACAH,aAAOD,KAAKyC,KAAL,CAAWN,IAAlB,EAAwB/B,OAAxB,CAAgC;AAC9BgC,kBAAU,IADoB;AAE9BE,cAAM,MAFwB;AAG9BD,iBAAS,qBAHqB;AAI9B+H,iBAAS;AAJqB,OAAhC;AAMD,KAnBD;AAoBD,GArFD;;AAuFAnL,WAAS,cAAT,EAAyB,YAAM;AAC7Bc,OAAG,mDAAH,EAAwD,YAAM;AAC5D,UAAMC,OAAO,IAAI3B,IAAJ,EAAb;AACA2B,WAAKkB,GAAL;AACA,aAAOlB,KAAKqE,OAAL,CAAa;AAClBC,gBAAQ,MADU;AAElBnE,cAAM,SAFY;AAGlBmC,cAAM,YAHY;AAIlBiC,cAAMhG,MAAMiG,aAAN,CAAoBxF,kBAApB,EAAwC,EAAxC;AAJY,OAAb,EAKJ4E,IALI,CAKC,YAAM;AACZ5D,aAAK8C,aAAL,CAAmBrC,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,CAAnB;AACA,YAAMyI,WAAWjK,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWP,cAAvB,EAAuC,CAAvC,CAAjB;AACA,YAAMyI,sBAAsB,EAA5B;AACAA,4BAAoBD,QAApB,IAAgC;AAC9BtH,mBAAS3C,OAAOC,IAAP,CAAYV,KAAKyC,KAAL,CAAWR,KAAvB,CADqB;AAE9B2I,gBAAM,CAFwB;AAG9B/G,kBAAQ;AAHsB,SAAhC;AAKA5D,eAAOD,KAAKyC,KAAL,CAAWP,cAAlB,EAAkC9B,OAAlC,CAA0CuK,mBAA1C;AACD,OAfM,CAAP;AAgBD,KAnBD;AAoBD,GArBD;;AAuBA1L,WAAS,MAAT,EAAiB,YAAM;AACrBc,OAAG,iCAAH,EAAsC,YAAM;AAC1C,UAAMC,OAAO,IAAI3B,IAAJ,CAAS;AACpBwM,gBAAQ;AACNC,mBAAS;AACPjD,kBAAM;AADC;AADH;AADY,OAAT,CAAb;;AAQA5H,aAAOD,KAAK+K,IAAL,CAAU,aAAV,CAAP,EAAiCjH,IAAjC,CAAsC,2CAAtC;AACA7D,aAAOD,KAAK+K,IAAL,CAAU,MAAV,CAAP,EAA0BjH,IAA1B,CAA+B,WAA/B;AACD,KAXD;AAYD,GAbD;;AAeA7E,WAAS,sBAAT,EAAiC,YAAM;AACrCc,OAAG,6CAAH,EAAkD,YAAM;AACtD,UAAMC,OAAO,IAAI3B,IAAJ,CAAS;AACpB0I,sBAAc;AACZsC,4BAAkB;AADN;AADM,OAAT,CAAb;;AAMApJ,aAAOD,KAAKgL,IAAL,CAAUjE,YAAV,CAAuBsC,gBAA9B,EAAgDvF,IAAhD,CAAqD,CAArD;AACA7D,aAAOD,KAAKgL,IAAL,CAAUjE,YAAV,CAAuBkE,gBAA9B,EAAgDnH,IAAhD,CAAqD,KAArD;AACD,KATD;AAUD,GAXD;AAYD,CA5rCD","file":"Core.test.js","sourcesContent":["const Core = require('./Core')\nconst utils = require('./Utils')\nconst Plugin = require('./Plugin')\nconst AcquirerPlugin1 = require('../../test/mocks/acquirerPlugin1')\nconst AcquirerPlugin2 = require('../../test/mocks/acquirerPlugin2')\nconst InvalidPlugin = require('../../test/mocks/invalidPlugin')\nconst InvalidPluginWithoutId = require('../../test/mocks/invalidPluginWithoutId')\nconst InvalidPluginWithoutType = require('../../test/mocks/invalidPluginWithoutType')\n\njest.mock('cuid', () => {\n  return () => 'cjd09qwxb000dlql4tp4doz8h'\n})\n\nconst sampleImageDataURI =\n  'data:image/jpeg;base64,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'\n\ndescribe('src/Core', () => {\n  const RealCreateObjectUrl = global.URL.createObjectURL\n  beforeEach(() => {\n    jest.spyOn(utils, 'findDOMElement').mockImplementation(path => {\n      return 'some config...'\n    })\n    jest.spyOn(utils, 'createThumbnail').mockImplementation(path => {\n      return Promise.resolve(sampleImageDataURI)\n    })\n    utils.createThumbnail.mockClear()\n\n    global.URL.createObjectURL = jest.fn().mockReturnValue('newUrl')\n  })\n\n  afterEach(() => {\n    global.URL.createObjectURL = RealCreateObjectUrl\n  })\n\n  it('should expose a class', () => {\n    const core = Core()\n    expect(core.constructor.name).toEqual('Uppy')\n  })\n\n  it('should have a string `id` option that defaults to \"uppy\"', () => {\n    const core = Core()\n    expect(core.getID()).toEqual('uppy')\n\n    const core2 = Core({ id: 'profile' })\n    expect(core2.getID()).toEqual('profile')\n  })\n\n  describe('plugins', () => {\n    it('should add a plugin to the plugin stack', () => {\n      const core = Core()\n      core.use(AcquirerPlugin1)\n      expect(Object.keys(core.plugins.acquirer).length).toEqual(1)\n    })\n\n    it('should prevent the same plugin from being added more than once', () => {\n      const core = Core()\n      core.use(AcquirerPlugin1)\n\n      expect(() => {\n        core.use(AcquirerPlugin1)\n      }).toThrowErrorMatchingSnapshot()\n    })\n\n    it('should not be able to add an invalid plugin', () => {\n      const core = Core()\n\n      expect(() => {\n        core.use(InvalidPlugin)\n      }).toThrowErrorMatchingSnapshot()\n    })\n\n    it('should not be able to add a plugin that has no id', () => {\n      const core = Core()\n\n      expect(() =>\n        core.use(InvalidPluginWithoutId)\n      ).toThrowErrorMatchingSnapshot()\n    })\n\n    it('should not be able to add a plugin that has no type', () => {\n      const core = Core()\n\n      expect(() =>\n        core.use(InvalidPluginWithoutType)\n      ).toThrowErrorMatchingSnapshot()\n    })\n\n    it('should return the plugin that matches the specified name', () => {\n      const core = new Core()\n      expect(core.getPlugin('foo')).toEqual(false)\n\n      core.use(AcquirerPlugin1)\n      const plugin = core.getPlugin('TestSelector1')\n      expect(plugin.id).toEqual('TestSelector1')\n      expect(plugin instanceof Plugin)\n    })\n\n    it('should call the specified method on all the plugins', () => {\n      const core = new Core()\n      core.use(AcquirerPlugin1)\n      core.use(AcquirerPlugin2)\n      core.iteratePlugins(plugin => {\n        plugin.run('hello')\n      })\n      expect(core.plugins.acquirer[0].mocks.run.mock.calls.length).toEqual(1)\n      expect(core.plugins.acquirer[0].mocks.run.mock.calls[0]).toEqual([\n        'hello'\n      ])\n      expect(core.plugins.acquirer[1].mocks.run.mock.calls.length).toEqual(1)\n      expect(core.plugins.acquirer[1].mocks.run.mock.calls[0]).toEqual([\n        'hello'\n      ])\n    })\n\n    it('should uninstall and the remove the specified plugin', () => {\n      const core = new Core()\n      core.use(AcquirerPlugin1)\n      core.use(AcquirerPlugin2)\n      expect(Object.keys(core.plugins.acquirer).length).toEqual(2)\n\n      const plugin = core.getPlugin('TestSelector1')\n      core.removePlugin(plugin)\n      expect(Object.keys(core.plugins.acquirer).length).toEqual(1)\n      expect(plugin.mocks.uninstall.mock.calls.length).toEqual(1)\n      expect(core.plugins.acquirer[0].mocks.run.mock.calls.length).toEqual(0)\n    })\n  })\n\n  describe('state', () => {\n    it('should update all the plugins with the new state when the updateAll method is called', () => {\n      const core = new Core()\n      core.use(AcquirerPlugin1)\n      core.use(AcquirerPlugin2)\n      core.updateAll({ foo: 'bar' })\n      expect(core.plugins.acquirer[0].mocks.update.mock.calls.length).toEqual(1)\n      expect(core.plugins.acquirer[0].mocks.update.mock.calls[0]).toEqual([\n        { foo: 'bar' }\n      ])\n      expect(core.plugins.acquirer[1].mocks.update.mock.calls.length).toEqual(1)\n      expect(core.plugins.acquirer[1].mocks.update.mock.calls[0]).toEqual([\n        { foo: 'bar' }\n      ])\n    })\n\n    it('should update the state', () => {\n      const core = new Core()\n      const stateUpdateEventMock = jest.fn()\n      core.on('state-update', stateUpdateEventMock)\n      core.use(AcquirerPlugin1)\n      core.use(AcquirerPlugin2)\n\n      core.setState({ foo: 'bar', bee: 'boo' })\n      core.setState({ foo: 'baar' })\n\n      const newState = {\n        bee: 'boo',\n        capabilities: { resumableUploads: false },\n        files: {},\n        currentUploads: {},\n        foo: 'baar',\n        info: { isHidden: true, message: '', type: 'info' },\n        meta: {},\n        plugins: {},\n        totalProgress: 0\n      }\n\n      expect(core.state).toEqual(newState)\n\n      expect(core.plugins.acquirer[0].mocks.update.mock.calls[1]).toEqual([\n        newState\n      ])\n      expect(core.plugins.acquirer[1].mocks.update.mock.calls[1]).toEqual([\n        newState\n      ])\n\n      expect(stateUpdateEventMock.mock.calls.length).toEqual(2)\n      // current state\n      expect(stateUpdateEventMock.mock.calls[1][0]).toEqual({\n        bee: 'boo',\n        capabilities: { resumableUploads: false },\n        files: {},\n        currentUploads: {},\n        foo: 'bar',\n        info: { isHidden: true, message: '', type: 'info' },\n        meta: {},\n        plugins: {},\n        totalProgress: 0\n      })\n      // new state\n      expect(stateUpdateEventMock.mock.calls[1][1]).toEqual({\n        bee: 'boo',\n        capabilities: { resumableUploads: false },\n        files: {},\n        currentUploads: {},\n        foo: 'baar',\n        info: { isHidden: true, message: '', type: 'info' },\n        meta: {},\n        plugins: {},\n        totalProgress: 0\n      })\n    })\n\n    it('should get the state', () => {\n      const core = new Core()\n\n      core.setState({ foo: 'bar' })\n\n      expect(core.getState()).toEqual({\n        capabilities: { resumableUploads: false },\n        files: {},\n        currentUploads: {},\n        foo: 'bar',\n        info: { isHidden: true, message: '', type: 'info' },\n        meta: {},\n        plugins: {},\n        totalProgress: 0\n      })\n    })\n  })\n\n  it('should reset when the reset method is called', () => {\n    const core = new Core()\n    // const corePauseEventMock = jest.fn()\n    const coreCancelEventMock = jest.fn()\n    const coreStateUpdateEventMock = jest.fn()\n    core.on('cancel-all', coreCancelEventMock)\n    core.on('state-update', coreStateUpdateEventMock)\n    core.setState({ foo: 'bar', totalProgress: 30 })\n\n    core.reset()\n\n    // expect(corePauseEventMock.mock.calls.length).toEqual(1)\n    expect(coreCancelEventMock.mock.calls.length).toEqual(1)\n    expect(coreStateUpdateEventMock.mock.calls.length).toEqual(2)\n    expect(coreStateUpdateEventMock.mock.calls[1][1]).toEqual({\n      capabilities: { resumableUploads: false },\n      files: {},\n      currentUploads: {},\n      foo: 'bar',\n      info: { isHidden: true, message: '', type: 'info' },\n      meta: {},\n      plugins: {},\n      totalProgress: 0\n    })\n  })\n\n  it('should clear all uploads on cancelAll()', () => {\n    const core = new Core()\n    const id = core._createUpload([ 'a', 'b' ])\n\n    expect(core.state.currentUploads[id]).toBeDefined()\n\n    core.cancelAll()\n\n    expect(core.state.currentUploads[id]).toBeUndefined()\n  })\n\n  it('should close, reset and uninstall when the close method is called', () => {\n    const core = new Core()\n    core.use(AcquirerPlugin1)\n\n    // const corePauseEventMock = jest.fn()\n    const coreCancelEventMock = jest.fn()\n    const coreStateUpdateEventMock = jest.fn()\n    // core.on('pause-all', corePauseEventMock)\n    core.on('cancel-all', coreCancelEventMock)\n    core.on('state-update', coreStateUpdateEventMock)\n\n    core.close()\n\n    // expect(corePauseEventMock.mock.calls.length).toEqual(1)\n    expect(coreCancelEventMock.mock.calls.length).toEqual(1)\n    expect(coreStateUpdateEventMock.mock.calls.length).toEqual(1)\n    expect(coreStateUpdateEventMock.mock.calls[0][1]).toEqual({\n      capabilities: { resumableUploads: false },\n      files: {},\n      currentUploads: {},\n      info: { isHidden: true, message: '', type: 'info' },\n      meta: {},\n      plugins: {},\n      totalProgress: 0\n    })\n    expect(core.plugins.acquirer[0].mocks.uninstall.mock.calls.length).toEqual(\n      1\n    )\n  })\n\n  describe('upload hooks', () => {\n    it('should add data returned from upload hooks to the .upload() result', () => {\n      const core = new Core()\n      core.addPreProcessor((fileIDs, uploadID) => {\n        core.addResultData(uploadID, { pre: 'ok' })\n      })\n      core.addPostProcessor((fileIDs, uploadID) => {\n        core.addResultData(uploadID, { post: 'ok' })\n      })\n      core.addUploader((fileIDs, uploadID) => {\n        core.addResultData(uploadID, { upload: 'ok' })\n      })\n      core.run()\n      return core.upload().then((result) => {\n        expect(result.pre).toBe('ok')\n        expect(result.upload).toBe('ok')\n        expect(result.post).toBe('ok')\n      })\n    })\n  })\n\n  describe('preprocessors', () => {\n    it('should add a preprocessor', () => {\n      const core = new Core()\n      const preprocessor = function () {}\n      core.addPreProcessor(preprocessor)\n      expect(core.preProcessors[0]).toEqual(preprocessor)\n    })\n\n    it('should remove a preprocessor', () => {\n      const core = new Core()\n      const preprocessor1 = function () {}\n      const preprocessor2 = function () {}\n      const preprocessor3 = function () {}\n      core.addPreProcessor(preprocessor1)\n      core.addPreProcessor(preprocessor2)\n      core.addPreProcessor(preprocessor3)\n      expect(core.preProcessors.length).toEqual(3)\n      core.removePreProcessor(preprocessor2)\n      expect(core.preProcessors.length).toEqual(2)\n    })\n\n    it('should execute all the preprocessors when uploading a file', () => {\n      const core = new Core()\n      const preprocessor1 = jest.fn()\n      const preprocessor2 = jest.fn()\n      core.addPreProcessor(preprocessor1)\n      core.addPreProcessor(preprocessor2)\n\n      return core\n        .addFile({\n          source: 'jest',\n          name: 'foo.jpg',\n          type: 'image/jpeg',\n          data: utils.dataURItoFile(sampleImageDataURI, {})\n        })\n        .then(() => core.upload())\n        .then(() => {\n          const fileId = Object.keys(core.state.files)[0]\n          expect(preprocessor1.mock.calls.length).toEqual(1)\n\n          expect(preprocessor1.mock.calls[0][0].length).toEqual(1)\n          expect(preprocessor1.mock.calls[0][0][0]).toEqual(fileId)\n\n          expect(preprocessor2.mock.calls[0][0].length).toEqual(1)\n          expect(preprocessor2.mock.calls[0][0][0]).toEqual(fileId)\n        })\n    })\n\n    it('should update the file progress state when preprocess-progress event is fired', () => {\n      const core = new Core()\n      core.run()\n      return core\n        .addFile({\n          source: 'jest',\n          name: 'foo.jpg',\n          type: 'image/jpeg',\n          data: utils.dataURItoFile(sampleImageDataURI, {})\n        })\n        .then(() => {\n          const fileId = Object.keys(core.state.files)[0]\n          const file = core.getFile(fileId)\n          core.emit('preprocess-progress', file, {\n            mode: 'determinate',\n            message: 'something',\n            value: 0\n          })\n          expect(core.state.files[fileId].progress).toEqual({\n            percentage: 0,\n            bytesUploaded: 0,\n            bytesTotal: 17175,\n            uploadComplete: false,\n            uploadStarted: false,\n            preprocess: { mode: 'determinate', message: 'something', value: 0 }\n          })\n        })\n    })\n\n    it('should update the file progress state when preprocess-complete event is fired', () => {\n      const core = new Core()\n      core.run()\n      return core\n        .addFile({\n          source: 'jest',\n          name: 'foo.jpg',\n          type: 'image/jpeg',\n          data: utils.dataURItoFile(sampleImageDataURI, {})\n        })\n        .then(() => {\n          const fileID = Object.keys(core.state.files)[0]\n          const file = core.state.files[fileID]\n          core.emit('preprocess-complete', file, {\n            mode: 'determinate',\n            message: 'something',\n            value: 0\n          })\n          expect(core.state.files[fileID].progress).toEqual({\n            percentage: 0,\n            bytesUploaded: 0,\n            bytesTotal: 17175,\n            uploadComplete: false,\n            uploadStarted: false\n          })\n        })\n    })\n  })\n\n  describe('postprocessors', () => {\n    it('should add a postprocessor', () => {\n      const core = new Core()\n      const postprocessor = function () {}\n      core.addPostProcessor(postprocessor)\n      expect(core.postProcessors[0]).toEqual(postprocessor)\n    })\n\n    it('should remove a postprocessor', () => {\n      const core = new Core()\n      const postprocessor1 = function () {}\n      const postprocessor2 = function () {}\n      const postprocessor3 = function () {}\n      core.addPostProcessor(postprocessor1)\n      core.addPostProcessor(postprocessor2)\n      core.addPostProcessor(postprocessor3)\n      expect(core.postProcessors.length).toEqual(3)\n      core.removePostProcessor(postprocessor2)\n      expect(core.postProcessors.length).toEqual(2)\n    })\n\n    it('should execute all the postprocessors when uploading a file', () => {\n      const core = new Core()\n      const postprocessor1 = jest.fn()\n      const postprocessor2 = jest.fn()\n      core.addPostProcessor(postprocessor1)\n      core.addPostProcessor(postprocessor2)\n\n      return core\n        .addFile({\n          source: 'jest',\n          name: 'foo.jpg',\n          type: 'image/jpeg',\n          data: utils.dataURItoFile(sampleImageDataURI, {})\n        })\n        .then(() => core.upload())\n        .then(() => {\n          expect(postprocessor1.mock.calls.length).toEqual(1)\n          // const lastModifiedTime = new Date()\n          // const fileId = 'foojpg' + lastModifiedTime.getTime()\n          const fileId = 'uppy-foojpg-image'\n\n          expect(postprocessor1.mock.calls[0][0].length).toEqual(1)\n          expect(postprocessor1.mock.calls[0][0][0].substring(0, 17)).toEqual(\n            fileId.substring(0, 17)\n          )\n\n          expect(postprocessor2.mock.calls[0][0].length).toEqual(1)\n          expect(postprocessor2.mock.calls[0][0][0].substring(0, 17)).toEqual(\n            fileId.substring(0, 17)\n          )\n        })\n    })\n\n    it('should update the file progress state when postprocess-progress event is fired', () => {\n      const core = new Core()\n      core.run()\n      return core\n        .addFile({\n          source: 'jest',\n          name: 'foo.jpg',\n          type: 'image/jpeg',\n          data: utils.dataURItoFile(sampleImageDataURI, {})\n        })\n        .then(() => {\n          const fileId = Object.keys(core.state.files)[0]\n          const file = core.getFile(fileId)\n          core.emit('postprocess-progress', file, {\n            mode: 'determinate',\n            message: 'something',\n            value: 0\n          })\n          expect(core.state.files[fileId].progress).toEqual({\n            percentage: 0,\n            bytesUploaded: 0,\n            bytesTotal: 17175,\n            uploadComplete: false,\n            uploadStarted: false,\n            postprocess: { mode: 'determinate', message: 'something', value: 0 }\n          })\n        })\n    })\n\n    it('should update the file progress state when postprocess-complete event is fired', () => {\n      const core = new Core()\n      core.run()\n      return core\n        .addFile({\n          source: 'jest',\n          name: 'foo.jpg',\n          type: 'image/jpeg',\n          data: utils.dataURItoFile(sampleImageDataURI, {})\n        })\n        .then(() => {\n          const fileId = Object.keys(core.state.files)[0]\n          const file = core.state.files[fileId]\n          core.emit('postprocess-complete', file, {\n            mode: 'determinate',\n            message: 'something',\n            value: 0\n          })\n          expect(core.state.files[fileId].progress).toEqual({\n            percentage: 0,\n            bytesUploaded: 0,\n            bytesTotal: 17175,\n            uploadComplete: false,\n            uploadStarted: false\n          })\n        })\n    })\n  })\n\n  describe('uploaders', () => {\n    it('should add an uploader', () => {\n      const core = new Core()\n      const uploader = function () {}\n      core.addUploader(uploader)\n      expect(core.uploaders[0]).toEqual(uploader)\n    })\n\n    it('should remove an uploader', () => {\n      const core = new Core()\n      const uploader1 = function () {}\n      const uploader2 = function () {}\n      const uploader3 = function () {}\n      core.addUploader(uploader1)\n      core.addUploader(uploader2)\n      core.addUploader(uploader3)\n      expect(core.uploaders.length).toEqual(3)\n      core.removeUploader(uploader2)\n      expect(core.uploaders.length).toEqual(2)\n    })\n  })\n\n  describe('adding a file', () => {\n    it('should call onBeforeFileAdded if it was specified in the options when initailising the class', () => {\n      const onBeforeFileAdded = jest.fn(value => {\n        return Promise.resolve()\n      })\n      const core = new Core({\n        onBeforeFileAdded\n      })\n      return core\n        .addFile({\n          source: 'jest',\n          name: 'foo.jpg',\n          type: 'image/jpeg',\n          data: utils.dataURItoFile(sampleImageDataURI, {})\n        })\n        .then(() => {\n          expect(onBeforeFileAdded.mock.calls.length).toEqual(1)\n          expect(onBeforeFileAdded.mock.calls[0][0].name).toEqual('foo.jpg')\n          expect(onBeforeFileAdded.mock.calls[0][1]).toEqual({})\n        })\n    })\n\n    it('should add a file', () => {\n      const fileData = utils.dataURItoFile(sampleImageDataURI, {})\n      const fileAddedEventMock = jest.fn()\n      const core = new Core()\n      core.run()\n      core.on('file-added', fileAddedEventMock)\n      return core\n        .addFile({\n          source: 'jest',\n          name: 'foo.jpg',\n          type: 'image/jpeg',\n          data: fileData\n        })\n        .then(() => {\n          const fileId = Object.keys(core.state.files)[0]\n          const newFile = {\n            extension: 'jpg',\n            id: fileId,\n            isRemote: false,\n            meta: { name: 'foo.jpg', type: 'image/jpeg' },\n            name: 'foo.jpg',\n            preview: undefined,\n            data: fileData,\n            progress: {\n              bytesTotal: 17175,\n              bytesUploaded: 0,\n              percentage: 0,\n              uploadComplete: false,\n              uploadStarted: false\n            },\n            remote: '',\n            size: 17175,\n            source: 'jest',\n            type: 'image/jpeg'\n          }\n          expect(core.state.files[fileId]).toEqual(newFile)\n          expect(fileAddedEventMock.mock.calls[0][0]).toEqual(newFile)\n        })\n    })\n\n    it('should not allow a file that does not meet the restrictions', () => {\n      const core = new Core({\n        restrictions: {\n          allowedFileTypes: ['image/gif']\n        }\n      })\n      return core\n        .addFile({\n          source: 'jest',\n          name: 'foo.jpg',\n          type: 'image/jpeg',\n          data: utils.dataURItoFile(sampleImageDataURI, {})\n        })\n        .then(() => {\n          throw new Error('File was allowed through')\n        })\n        .catch(e => {\n          expect(e.message).toEqual('You can only upload: image/gif')\n        })\n    })\n\n    it('should work with restriction errors that are not Error class instances', () => {\n      const core = new Core({\n        onBeforeFileAdded () {\n          return Promise.reject('a plain string') // eslint-disable-line prefer-promise-reject-errors\n        }\n      })\n      return expect(core.addFile({\n        source: 'jest',\n        name: 'foo.jpg',\n        type: 'image/jpeg',\n        data: null\n      })).rejects.toMatchObject(new Error('a plain string'))\n    })\n  })\n\n  describe('uploading a file', () => {\n    it('should return a { successful, failed } pair containing file objects', () => {\n      const core = new Core().run()\n      core.addUploader((fileIDs) => Promise.resolve())\n      return Promise.all([\n        core.addFile({ source: 'jest', name: 'foo.jpg', type: 'image/jpeg', data: new Uint8Array() }),\n        core.addFile({ source: 'jest', name: 'bar.jpg', type: 'image/jpeg', data: new Uint8Array() })\n      ]).then(() => {\n        return expect(core.upload()).resolves.toMatchObject({\n          successful: [\n            { name: 'foo.jpg' },\n            { name: 'bar.jpg' }\n          ],\n          failed: []\n        })\n      })\n    })\n\n    it('should return files with errors in the { failed } key', () => {\n      const core = new Core().run()\n      core.addUploader((fileIDs) => {\n        fileIDs.forEach((fileID) => {\n          const file = core.getFile(fileID)\n          if (/bar/.test(file.name)) {\n            core.emit('upload-error', file, new Error('This is bar and I do not like bar'))\n          }\n        })\n        return Promise.resolve()\n      })\n\n      return Promise.all([\n        core.addFile({ source: 'jest', name: 'foo.jpg', type: 'image/jpeg', data: new Uint8Array() }),\n        core.addFile({ source: 'jest', name: 'bar.jpg', type: 'image/jpeg', data: new Uint8Array() })\n      ]).then(() => {\n        return expect(core.upload()).resolves.toMatchObject({\n          successful: [\n            { name: 'foo.jpg' }\n          ],\n          failed: [\n            { name: 'bar.jpg', error: 'This is bar and I do not like bar' }\n          ]\n        })\n      })\n    })\n\n    it('should only upload files that are not already assigned to another upload id', () => {\n      const core = new Core().run()\n      core.store.state.currentUploads = {\n        upload1: {\n          fileIDs: ['uppy-file1jpg-image/jpeg', 'uppy-file2jpg-image/jpeg', 'uppy-file3jpg-image/jpeg']\n        },\n        upload2: {\n          fileIDs: ['uppy-file4jpg-image/jpeg', 'uppy-file5jpg-image/jpeg', 'uppy-file6jpg-image/jpeg']\n        }\n      }\n      core.addUploader((fileIDs) => Promise.resolve())\n      return Promise.all([\n        core.addFile({ source: 'jest', name: 'foo.jpg', type: 'image/jpeg', data: new Uint8Array() }),\n        core.addFile({ source: 'jest', name: 'bar.jpg', type: 'image/jpeg', data: new Uint8Array() }),\n        core.addFile({ source: 'file3', name: 'file3.jpg', type: 'image/jpeg', data: new Uint8Array() })\n      ]).then(() => {\n        return core.upload()\n      }).then((result) => {\n        expect(result).toMatchSnapshot()\n      })\n    })\n  })\n\n  describe('removing a file', () => {\n    it('should remove the file', () => {\n      const fileRemovedEventMock = jest.fn()\n\n      const core = new Core()\n      core.on('file-removed', fileRemovedEventMock)\n      core.run()\n      return core\n        .addFile({\n          source: 'jest',\n          name: 'foo.jpg',\n          type: 'image/jpeg',\n          data: utils.dataURItoFile(sampleImageDataURI, {})\n        })\n        .then(() => {\n          const fileId = Object.keys(core.state.files)[0]\n          expect(Object.keys(core.state.files).length).toEqual(1)\n          core.setState({\n            totalProgress: 50\n          })\n\n          const file = core.getFile(fileId)\n          core.removeFile(fileId)\n\n          expect(Object.keys(core.state.files).length).toEqual(0)\n          expect(fileRemovedEventMock.mock.calls[0][0]).toEqual(file)\n          expect(core.state.totalProgress).toEqual(0)\n        })\n    })\n  })\n\n  describe('restoring a file', () => {\n    xit('should restore a file', () => {})\n\n    xit(\"should fail to restore a file if it doesn't exist\", () => {})\n  })\n\n  describe('get a file', () => {\n    it('should get the specified file', () => {\n      const core = new Core()\n      return core\n        .addFile({\n          source: 'jest',\n          name: 'foo.jpg',\n          type: 'image/jpeg',\n          data: utils.dataURItoFile(sampleImageDataURI, {})\n        })\n        .then(() => {\n          const fileId = Object.keys(core.state.files)[0]\n          expect(core.getFile(fileId).name).toEqual('foo.jpg')\n\n          expect(core.getFile('non existant file')).toEqual(undefined)\n        })\n    })\n  })\n\n  describe('meta data', () => {\n    it('should set meta data by calling setMeta', () => {\n      const core = new Core({\n        meta: { foo2: 'bar2' }\n      })\n      core.setMeta({ foo: 'bar', bur: 'mur' })\n      core.setMeta({ boo: 'moo', bur: 'fur' })\n      expect(core.state.meta).toEqual({\n        foo: 'bar',\n        foo2: 'bar2',\n        boo: 'moo',\n        bur: 'fur'\n      })\n    })\n\n    it('should update meta data for a file by calling updateMeta', () => {\n      const core = new Core()\n      return core\n        .addFile({\n          source: 'jest',\n          name: 'foo.jpg',\n          type: 'image/jpeg',\n          data: utils.dataURItoFile(sampleImageDataURI, {})\n        })\n        .then(() => {\n          const fileId = Object.keys(core.state.files)[0]\n          core.setFileMeta(fileId, { foo: 'bar', bur: 'mur' })\n          core.setFileMeta(fileId, { boo: 'moo', bur: 'fur' })\n          expect(core.state.files[fileId].meta).toEqual({\n            name: 'foo.jpg',\n            type: 'image/jpeg',\n            foo: 'bar',\n            bur: 'fur',\n            boo: 'moo'\n          })\n        })\n    })\n  })\n\n  describe('progress', () => {\n    it('should calculate the progress of a file upload', () => {\n      const core = new Core()\n      return core\n        .addFile({\n          source: 'jest',\n          name: 'foo.jpg',\n          type: 'image/jpeg',\n          data: utils.dataURItoFile(sampleImageDataURI, {})\n        })\n        .then(() => {\n          const fileId = Object.keys(core.state.files)[0]\n          const file = core.getFile(fileId)\n          core._calculateProgress(file, {\n            bytesUploaded: 12345,\n            bytesTotal: 17175\n          })\n          expect(core.state.files[fileId].progress).toEqual({\n            percentage: 71,\n            bytesUploaded: 12345,\n            bytesTotal: 17175,\n            uploadComplete: false,\n            uploadStarted: false\n          })\n\n          core._calculateProgress(file, {\n            bytesUploaded: 17175,\n            bytesTotal: 17175\n          })\n          expect(core.state.files[fileId].progress).toEqual({\n            percentage: 100,\n            bytesUploaded: 17175,\n            bytesTotal: 17175,\n            uploadComplete: false,\n            uploadStarted: false\n          })\n        })\n    })\n\n    it('should calculate the total progress of all file uploads', () => {\n      const core = new Core()\n      return core\n        .addFile({\n          source: 'jest',\n          name: 'foo.jpg',\n          type: 'image/jpeg',\n          data: utils.dataURItoFile(sampleImageDataURI, {})\n        })\n        .then(() => {\n          return core\n            .addFile({\n              source: 'jest',\n              name: 'foo2.jpg',\n              type: 'image/jpeg',\n              data: utils.dataURItoFile(sampleImageDataURI, {})\n            })\n        }).then(() => {\n          const fileId1 = Object.keys(core.state.files)[0]\n          const fileId2 = Object.keys(core.state.files)[1]\n          const file1 = core.state.files[fileId1]\n          const file2 = core.state.files[fileId2]\n          core.state.files[fileId1].progress.uploadStarted = new Date()\n          core.state.files[fileId2].progress.uploadStarted = new Date()\n\n          core._calculateProgress(file1, {\n            bytesUploaded: 12345,\n            bytesTotal: 17175\n          })\n\n          core._calculateProgress(file2, {\n            bytesUploaded: 10201,\n            bytesTotal: 17175\n          })\n\n          core._calculateTotalProgress()\n          expect(core.state.totalProgress).toEqual(65)\n        })\n    })\n\n    it('should reset the progress', () => {\n      const resetProgressEvent = jest.fn()\n      const core = new Core()\n      core.run()\n      core.on('reset-progress', resetProgressEvent)\n      return core\n        .addFile({\n          source: 'jest',\n          name: 'foo.jpg',\n          type: 'image/jpeg',\n          data: utils.dataURItoFile(sampleImageDataURI, {})\n        })\n        .then(() => {\n          return core\n            .addFile({\n              source: 'jest',\n              name: 'foo2.jpg',\n              type: 'image/jpeg',\n              data: utils.dataURItoFile(sampleImageDataURI, {})\n            })\n        }).then(() => {\n          const fileId1 = Object.keys(core.state.files)[0]\n          const fileId2 = Object.keys(core.state.files)[1]\n          const file1 = core.state.files[fileId1]\n          const file2 = core.state.files[fileId2]\n          core.state.files[fileId1].progress.uploadStarted = new Date()\n          core.state.files[fileId2].progress.uploadStarted = new Date()\n\n          core._calculateProgress(file1, {\n            bytesUploaded: 12345,\n            bytesTotal: 17175\n          })\n\n          core._calculateProgress(file2, {\n            bytesUploaded: 10201,\n            bytesTotal: 17175\n          })\n\n          core._calculateTotalProgress()\n\n          expect(core.state.totalProgress).toEqual(65)\n\n          core.resetProgress()\n\n          expect(core.state.files[fileId1].progress).toEqual({\n            percentage: 0,\n            bytesUploaded: 0,\n            bytesTotal: 17175,\n            uploadComplete: false,\n            uploadStarted: false\n          })\n          expect(core.state.files[fileId2].progress).toEqual({\n            percentage: 0,\n            bytesUploaded: 0,\n            bytesTotal: 17175,\n            uploadComplete: false,\n            uploadStarted: false\n          })\n          expect(core.state.totalProgress).toEqual(0)\n          expect(resetProgressEvent.mock.calls.length).toEqual(1)\n        })\n    })\n  })\n\n  describe('checkRestrictions', () => {\n    it('should enforce the maxNumberOfFiles rule', () => {\n      const core = new Core({\n        autoProceed: false,\n        restrictions: {\n          maxNumberOfFiles: 1\n        }\n      })\n\n      // add 2 files\n      core.addFile({\n        source: 'jest',\n        name: 'foo1.jpg',\n        type: 'image/jpeg',\n        data: utils.dataURItoFile(sampleImageDataURI, {})\n      })\n      return expect(core.addFile({\n        source: 'jest',\n        name: 'foo2.jpg',\n        type: 'image/jpeg',\n        data: utils.dataURItoFile(sampleImageDataURI, {})\n      })).rejects.toMatchObject(new Error('You can only upload 1 file')).then(() => {\n        expect(core.state.info.message).toEqual('You can only upload 1 file')\n      })\n    })\n\n    xit('should enforce the minNumberOfFiles rule', () => {})\n\n    it('should enfore the allowedFileTypes rule', () => {\n      const core = new Core({\n        autoProceed: false,\n        restrictions: {\n          allowedFileTypes: ['image/gif', 'image/png']\n        }\n      })\n\n      return expect(core.addFile({\n        source: 'jest',\n        name: 'foo2.jpg',\n        type: 'image/jpeg',\n        data: utils.dataURItoFile(sampleImageDataURI, {})\n      })).rejects.toMatchObject(new Error('You can only upload: image/gif, image/png')).then(() => {\n        expect(core.state.info.message).toEqual('You can only upload: image/gif, image/png')\n      })\n    })\n\n    it('should enforce the maxFileSize rule', () => {\n      const core = new Core({\n        autoProceed: false,\n        restrictions: {\n          maxFileSize: 1234\n        }\n      })\n\n      return expect(core.addFile({\n        source: 'jest',\n        name: 'foo.jpg',\n        type: 'image/jpeg',\n        data: utils.dataURItoFile(sampleImageDataURI, {})\n      })).rejects.toMatchObject(new Error('This file exceeds maximum allowed size of 1.2 KB')).then(() => {\n        expect(core.state.info.message).toEqual('This file exceeds maximum allowed size of 1.2 KB')\n      })\n    })\n  })\n\n  describe('actions', () => {\n    it('should update the state when receiving the error event', () => {\n      const core = new Core()\n      core.run()\n      core.emit('error', new Error('foooooo'))\n      expect(core.state.error).toEqual('foooooo')\n    })\n\n    it('should update the state when receiving the upload-error event', () => {\n      const core = new Core()\n      core.run()\n      core.state.files['fileId'] = {\n        name: 'filename'\n      }\n      core.emit('upload-error', core.state.files['fileId'], new Error('this is the error'))\n      expect(core.state.info).toEqual({'message': 'Failed to upload filename', 'details': 'this is the error', 'isHidden': false, 'type': 'error'})\n    })\n\n    it('should reset the error state when receiving the upload event', () => {\n      const core = new Core()\n      core.run()\n      core.emit('error', { foo: 'bar' })\n      core.emit('upload')\n      expect(core.state.error).toEqual(null)\n    })\n  })\n\n  describe('updateOnlineStatus', () => {\n    const RealNavigatorOnline = global.window.navigator.onLine\n\n    function mockNavigatorOnline (status) {\n      Object.defineProperty(\n        global.window.navigator,\n        'onLine',\n        {\n          value: status,\n          writable: true\n        }\n      )\n    }\n\n    afterEach(() => {\n      global.window.navigator.onLine = RealNavigatorOnline\n    })\n\n    it('should emit the correct event based on whether there is a network connection', () => {\n      const onlineEventMock = jest.fn()\n      const offlineEventMock = jest.fn()\n      const backOnlineEventMock = jest.fn()\n      const core = new Core()\n      core.on('is-offline', offlineEventMock)\n      core.on('is-online', onlineEventMock)\n      core.on('back-online', backOnlineEventMock)\n\n      mockNavigatorOnline(true)\n      core.updateOnlineStatus()\n      expect(onlineEventMock.mock.calls.length).toEqual(1)\n      expect(offlineEventMock.mock.calls.length).toEqual(0)\n      expect(backOnlineEventMock.mock.calls.length).toEqual(0)\n\n      mockNavigatorOnline(false)\n      core.updateOnlineStatus()\n      expect(onlineEventMock.mock.calls.length).toEqual(1)\n      expect(offlineEventMock.mock.calls.length).toEqual(1)\n      expect(backOnlineEventMock.mock.calls.length).toEqual(0)\n\n      mockNavigatorOnline(true)\n      core.updateOnlineStatus()\n      expect(onlineEventMock.mock.calls.length).toEqual(2)\n      expect(offlineEventMock.mock.calls.length).toEqual(1)\n      expect(backOnlineEventMock.mock.calls.length).toEqual(1)\n    })\n  })\n\n  describe('info', () => {\n    it('should set a string based message to be displayed infinitely', () => {\n      const infoVisibleEvent = jest.fn()\n      const core = new Core()\n      core.run()\n      core.on('info-visible', infoVisibleEvent)\n\n      core.info('This is the message', 'info', 0)\n      expect(core.state.info).toEqual({\n        isHidden: false,\n        type: 'info',\n        message: 'This is the message',\n        details: null\n      })\n      expect(infoVisibleEvent.mock.calls.length).toEqual(1)\n      expect(typeof core.infoTimeoutID).toEqual('undefined')\n    })\n\n    it('should set a object based message to be displayed infinitely', () => {\n      const infoVisibleEvent = jest.fn()\n      const core = new Core()\n      core.run()\n      core.on('info-visible', infoVisibleEvent)\n\n      core.info({\n        message: 'This is the message',\n        details: {\n          foo: 'bar'\n        }\n      }, 'warning', 0)\n      expect(core.state.info).toEqual({\n        isHidden: false,\n        type: 'warning',\n        message: 'This is the message',\n        details: {\n          foo: 'bar'\n        }\n      })\n      expect(infoVisibleEvent.mock.calls.length).toEqual(1)\n      expect(typeof core.infoTimeoutID).toEqual('undefined')\n    })\n\n    it('should set an info message to be displayed for a period of time before hiding', (done) => {\n      const infoVisibleEvent = jest.fn()\n      const infoHiddenEvent = jest.fn()\n      const core = new Core()\n      core.run()\n      core.on('info-visible', infoVisibleEvent)\n      core.on('info-hidden', infoHiddenEvent)\n\n      core.info('This is the message', 'info', 100)\n      expect(typeof core.infoTimeoutID).toEqual('number')\n      expect(infoHiddenEvent.mock.calls.length).toEqual(0)\n      setTimeout(() => {\n        expect(infoHiddenEvent.mock.calls.length).toEqual(1)\n        expect(core.state.info).toEqual({\n          isHidden: true,\n          type: 'info',\n          message: 'This is the message',\n          details: null\n        })\n        done()\n      }, 110)\n    })\n\n    it('should hide an info message', () => {\n      const infoVisibleEvent = jest.fn()\n      const infoHiddenEvent = jest.fn()\n      const core = new Core()\n      core.run()\n      core.on('info-visible', infoVisibleEvent)\n      core.on('info-hidden', infoHiddenEvent)\n\n      core.info('This is the message', 'info', 0)\n      expect(typeof core.infoTimeoutID).toEqual('undefined')\n      expect(infoHiddenEvent.mock.calls.length).toEqual(0)\n      core.hideInfo()\n      expect(infoHiddenEvent.mock.calls.length).toEqual(1)\n      expect(core.state.info).toEqual({\n        isHidden: true,\n        type: 'info',\n        message: 'This is the message',\n        details: null\n      })\n    })\n  })\n\n  describe('createUpload', () => {\n    it('should assign the specified files to a new upload', () => {\n      const core = new Core()\n      core.run()\n      return core.addFile({\n        source: 'jest',\n        name: 'foo.jpg',\n        type: 'image/jpeg',\n        data: utils.dataURItoFile(sampleImageDataURI, {})\n      }).then(() => {\n        core._createUpload(Object.keys(core.state.files))\n        const uploadId = Object.keys(core.state.currentUploads)[0]\n        const currentUploadsState = {}\n        currentUploadsState[uploadId] = {\n          fileIDs: Object.keys(core.state.files),\n          step: 0,\n          result: {}\n        }\n        expect(core.state.currentUploads).toEqual(currentUploadsState)\n      })\n    })\n  })\n\n  describe('i18n', () => {\n    it('merges in custom locale strings', () => {\n      const core = new Core({\n        locale: {\n          strings: {\n            test: 'beep boop'\n          }\n        }\n      })\n\n      expect(core.i18n('exceedsSize')).toBe('This file exceeds maximum allowed size of')\n      expect(core.i18n('test')).toBe('beep boop')\n    })\n  })\n\n  describe('default restrictions', () => {\n    it('should be merged with supplied restrictions', () => {\n      const core = new Core({\n        restrictions: {\n          maxNumberOfFiles: 3\n        }\n      })\n\n      expect(core.opts.restrictions.maxNumberOfFiles).toBe(3)\n      expect(core.opts.restrictions.minNumberOfFiles).toBe(false)\n    })\n  })\n})\n"]}