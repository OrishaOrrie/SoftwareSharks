{"version":3,"sources":["../../src/store/DefaultStore.js"],"names":["DefaultStore","state","callbacks","getState","setState","patch","prevState","nextState","_publish","subscribe","listener","push","splice","indexOf","args","forEach","module","exports","defaultStore"],"mappings":";;;;AAAA;;;IAGMA,Y;AACJ,0BAAe;AAAA;;AACb,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACD;;yBAEDC,Q,uBAAY;AACV,WAAO,KAAKF,KAAZ;AACD,G;;yBAEDG,Q,qBAAUC,K,EAAO;AACf,QAAMC,YAAY,SAAc,EAAd,EAAkB,KAAKL,KAAvB,CAAlB;AACA,QAAMM,YAAY,SAAc,EAAd,EAAkB,KAAKN,KAAvB,EAA8BI,KAA9B,CAAlB;;AAEA,SAAKJ,KAAL,GAAaM,SAAb;AACA,SAAKC,QAAL,CAAcF,SAAd,EAAyBC,SAAzB,EAAoCF,KAApC;AACD,G;;yBAEDI,S,sBAAWC,Q,EAAU;AAAA;;AACnB,SAAKR,SAAL,CAAeS,IAAf,CAAoBD,QAApB;AACA,WAAO,YAAM;AACX;AACA,YAAKR,SAAL,CAAeU,MAAf,CACE,MAAKV,SAAL,CAAeW,OAAf,CAAuBH,QAAvB,CADF,EAEE,CAFF;AAID,KAND;AAOD,G;;yBAEDF,Q,uBAAmB;AAAA,sCAANM,IAAM;AAANA,UAAM;AAAA;;AACjB,SAAKZ,SAAL,CAAea,OAAf,CAAuB,UAACL,QAAD,EAAc;AACnCA,gCAAYI,IAAZ;AACD,KAFD;AAGD,G;;;;;AAGHE,OAAOC,OAAP,GAAiB,SAASC,YAAT,GAAyB;AACxC,SAAO,IAAIlB,YAAJ,EAAP;AACD,CAFD","file":"DefaultStore.js","sourcesContent":["/**\n * Default store that keeps state in a simple object.\n */\nclass DefaultStore {\n  constructor () {\n    this.state = {}\n    this.callbacks = []\n  }\n\n  getState () {\n    return this.state\n  }\n\n  setState (patch) {\n    const prevState = Object.assign({}, this.state)\n    const nextState = Object.assign({}, this.state, patch)\n\n    this.state = nextState\n    this._publish(prevState, nextState, patch)\n  }\n\n  subscribe (listener) {\n    this.callbacks.push(listener)\n    return () => {\n      // Remove the listener.\n      this.callbacks.splice(\n        this.callbacks.indexOf(listener),\n        1\n      )\n    }\n  }\n\n  _publish (...args) {\n    this.callbacks.forEach((listener) => {\n      listener(...args)\n    })\n  }\n}\n\nmodule.exports = function defaultStore () {\n  return new DefaultStore()\n}\n"]}