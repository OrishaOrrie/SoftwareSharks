{"version":3,"sources":["../../src/core/Utils.test.js"],"names":["utils","require","sampleImageDataURI","describe","it","fileObj","name","type","data","lastModified","size","expect","generateFileID","toEqual","obj","length","toArray","promiseFn1","jest","fn","mockReturnValue","resolve","promiseFn2","promiseFn3","runPromiseSequence","then","mock","calls","RealTouchStart","global","window","ontouchstart","RealMaxTouchPoints","navigator","maxTouchPoints","beforeEach","afterEach","xit","isTouchDevice","getFileNameAndExtension","extension","undefined","truncateString","secondsToTime","hours","minutes","seconds","getFileTypeExtension","FileReader","addEventListener","e","cb","loadCb","errorCb","readAsArrayBuffer","chunk","target","result","ArrayBuffer","file","isRemote","getFileType","r","getArrayBuffer","buffer","byteLength","supported","forEach","isPreviewSupported","ext","isObjectURL","blob","dataURItoBlob","Blob","dataURItoFile","File","dateNow","Date","date5SecondsAgo","getTime","fileProgress","bytesUploaded","uploadStarted","Math","round","getSpeed","bytesTotal","getBytesRemaining","getETA","prettyETA","getSocketHost","settle","reject","Error","resolves","toMatchObject","successful","failed","pending","setTimeout","limit","limitPromises","fn2","all","toBe","Infinity"],"mappings":"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","file":"Utils.test.js","sourcesContent":["const utils = require('./Utils')\n\nconst sampleImageDataURI =\n  'data:image/jpeg;base64,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'\n\ndescribe('core/utils', () => {\n  describe('generateFileID', () => {\n    it('should take the filename object and produce a lowercase file id made up of uppy- prefix, file name (cleaned up to be lowercase, letters and numbers only), type, size and lastModified date', () => {\n      const fileObj = {\n        name: 'fOo0Fi@£$.jpg',\n        type: 'image/jpeg',\n        data: {\n          lastModified: 1498510508000,\n          size: 2271173\n        }\n      }\n\n      expect(utils.generateFileID(fileObj)).toEqual(\n        'uppy-foo0fijpg-image/jpeg-2271173-1498510508000'\n      )\n    })\n  })\n\n  describe('toArray', () => {\n    it('should convert a array-like object into an array', () => {\n      const obj = {\n        '0': 'zero',\n        '1': 'one',\n        '2': 'two',\n        '3': 'three',\n        '4': 'four',\n        length: 5\n      }\n\n      expect(utils.toArray(obj)).toEqual([\n        'zero',\n        'one',\n        'two',\n        'three',\n        'four'\n      ])\n    })\n  })\n\n  describe('runPromiseSequence', () => {\n    it('should run an array of promise-returning functions in sequence', () => {\n      const promiseFn1 = jest.fn().mockReturnValue(Promise.resolve)\n      const promiseFn2 = jest.fn().mockReturnValue(Promise.resolve)\n      const promiseFn3 = jest.fn().mockReturnValue(Promise.resolve)\n      return utils\n        .runPromiseSequence([promiseFn1, promiseFn2, promiseFn3])\n        .then(() => {\n          expect(promiseFn1.mock.calls.length).toEqual(1)\n          expect(promiseFn2.mock.calls.length).toEqual(1)\n          expect(promiseFn3.mock.calls.length).toEqual(1)\n        })\n    })\n  })\n\n  describe('isTouchDevice', () => {\n    const RealTouchStart = global.window.ontouchstart\n    const RealMaxTouchPoints = global.navigator.maxTouchPoints\n\n    beforeEach(() => {\n      global.window.ontouchstart = true\n      global.navigator.maxTouchPoints = 1\n    })\n\n    afterEach(() => {\n      global.navigator.maxTouchPoints = RealMaxTouchPoints\n      global.window.ontouchstart = RealTouchStart\n    })\n\n    xit(\"should return true if it's a touch device\", () => {\n      expect(utils.isTouchDevice()).toEqual(true)\n      delete global.window.ontouchstart\n      global.navigator.maxTouchPoints = false\n      expect(utils.isTouchDevice()).toEqual(false)\n    })\n  })\n\n  describe('getFileNameAndExtension', () => {\n    it('should return the filename and extension as an array', () => {\n      expect(utils.getFileNameAndExtension('fsdfjodsuf23rfw.jpg')).toEqual({\n        name: 'fsdfjodsuf23rfw',\n        extension: 'jpg'\n      })\n    })\n\n    it('should handle invalid filenames', () => {\n      expect(utils.getFileNameAndExtension('fsdfjodsuf23rfw')).toEqual({\n        name: 'fsdfjodsuf23rfw',\n        extension: undefined\n      })\n    })\n  })\n\n  describe('truncateString', () => {\n    it('should truncate the string by the specified amount', () => {\n      expect(utils.truncateString('abcdefghijkl', 10)).toEqual('abcde...jkl')\n      expect(utils.truncateString('abcdefghijkl', 9)).toEqual('abcd...jkl')\n      expect(utils.truncateString('abcdefghijkl', 8)).toEqual('abcd...kl')\n      expect(utils.truncateString('abcdefghijkl', 7)).toEqual('abc...kl')\n      expect(utils.truncateString('abcdefghijkl', 6)).toEqual('abc...kl')\n      expect(utils.truncateString('abcdefghijkl', 5)).toEqual('ab...kl')\n      expect(utils.truncateString('abcdefghijkl', 4)).toEqual('ab...l')\n      expect(utils.truncateString('abcdefghijkl', 3)).toEqual('a...l')\n      expect(utils.truncateString('abcdefghijkl', 2)).toEqual('a...l')\n      expect(utils.truncateString('abcdefghijkl', 1)).toEqual('...l')\n    })\n  })\n\n  describe('secondsToTime', () => {\n    expect(utils.secondsToTime(60)).toEqual({\n      hours: 0,\n      minutes: 1,\n      seconds: 0\n    })\n\n    expect(utils.secondsToTime(123)).toEqual({\n      hours: 0,\n      minutes: 2,\n      seconds: 3\n    })\n\n    expect(utils.secondsToTime(1060)).toEqual({\n      hours: 0,\n      minutes: 17,\n      seconds: 40\n    })\n\n    expect(utils.secondsToTime(123453460)).toEqual({\n      hours: 20,\n      minutes: 37,\n      seconds: 40\n    })\n  })\n\n  describe('getFileTypeExtension', () => {\n    it('should return the filetype based on the specified mime type', () => {\n      expect(utils.getFileTypeExtension('video/ogg')).toEqual('ogv')\n      expect(utils.getFileTypeExtension('audio/ogg')).toEqual('ogg')\n      expect(utils.getFileTypeExtension('video/webm')).toEqual('webm')\n      expect(utils.getFileTypeExtension('audio/webm')).toEqual('webm')\n      expect(utils.getFileTypeExtension('video/mp4')).toEqual('mp4')\n      expect(utils.getFileTypeExtension('audio/mp3')).toEqual('mp3')\n      expect(utils.getFileTypeExtension('foo/bar')).toEqual(null)\n    })\n  })\n\n  describe('getFileType', () => {\n    beforeEach(() => {\n      global.FileReader = class FileReader {\n        addEventListener (e, cb) {\n          if (e === 'load') {\n            this.loadCb = cb\n          }\n          if (e === 'error') {\n            this.errorCb = cb\n          }\n        }\n        readAsArrayBuffer (chunk) {\n          this.loadCb({ target: { result: new ArrayBuffer(8) } })\n        }\n      }\n    })\n\n    afterEach(() => {\n      global.FileReader = undefined\n    })\n\n    it('should trust the filetype if the file comes from a remote source', () => {\n      const file = {\n        isRemote: true,\n        type: 'audio/webm',\n        name: 'foo.webm'\n      }\n      return utils.getFileType(file).then(r => {\n        expect(r).toEqual('audio/webm')\n      })\n    })\n\n    it('should determine the filetype from the mimetype', () => {\n      const file = {\n        type: 'audio/webm',\n        name: 'foo.webm',\n        data: 'sdfsdfhq9efbicw'\n      }\n      return utils.getFileType(file).then(r => {\n        expect(r).toEqual('audio/webm')\n      })\n    })\n\n    it('should determine the filetype from the extension', () => {\n      const file = {\n        name: 'foo.mp3',\n        data: 'sdfsfhfh329fhwihs'\n      }\n      return utils.getFileType(file).then(r => {\n        expect(r).toEqual('audio/mp3')\n      })\n    })\n\n    it('should fail gracefully if unable to detect', () => {\n      const file = {\n        name: 'foobar',\n        data: 'sdfsfhfh329fhwihs'\n      }\n      return utils.getFileType(file).then(r => {\n        expect(r).toEqual(null)\n      })\n    })\n  })\n\n  describe('getArrayBuffer', () => {\n    beforeEach(() => {\n      global.FileReader = class FileReader {\n        addEventListener (e, cb) {\n          if (e === 'load') {\n            this.loadCb = cb\n          }\n          if (e === 'error') {\n            this.errorCb = cb\n          }\n        }\n        readAsArrayBuffer (chunk) {\n          this.loadCb({ target: { result: new ArrayBuffer(8) } })\n        }\n      }\n    })\n\n    afterEach(() => {\n      global.FileReader = undefined\n    })\n\n    it('should return a promise that resolves with the specified chunk', () => {\n      return utils.getArrayBuffer('abcde').then(buffer => {\n        expect(typeof buffer).toEqual('object')\n        expect(buffer.byteLength).toEqual(8)\n      })\n    })\n  })\n\n  describe('isPreviewSupported', () => {\n    it('should return true for any filetypes that browsers can preview', () => {\n      const supported = ['image/jpeg', 'image/gif', 'image/png', 'image/svg', 'image/svg+xml', 'image/bmp']\n      supported.forEach(ext => {\n        expect(utils.isPreviewSupported(ext)).toEqual(true)\n      })\n      expect(utils.isPreviewSupported('foo')).toEqual(false)\n    })\n  })\n\n  describe('isObjectURL', () => {\n    it('should return true if the specified url is an object url', () => {\n      expect(utils.isObjectURL('blob:abc123')).toEqual(true)\n      expect(utils.isObjectURL('kblob:abc123')).toEqual(false)\n      expect(utils.isObjectURL('blob-abc123')).toEqual(false)\n      expect(utils.isObjectURL('abc123')).toEqual(false)\n    })\n  })\n\n  describe('dataURItoBlob', () => {\n    it('should convert a data uri to a blob', () => {\n      const blob = utils.dataURItoBlob(sampleImageDataURI, {})\n      expect(blob instanceof Blob).toEqual(true)\n      expect(blob.size).toEqual(9348)\n      expect(blob.type).toEqual('image/jpeg')\n    })\n  })\n\n  describe('dataURItoFile', () => {\n    it('should convert a data uri to a file', () => {\n      const file = utils.dataURItoFile(sampleImageDataURI, { name: 'foo.jpg' })\n      expect(file instanceof File).toEqual(true)\n      expect(file.size).toEqual(9348)\n      expect(file.type).toEqual('image/jpeg')\n      expect(file.name).toEqual('foo.jpg')\n    })\n  })\n\n  describe('getSpeed', () => {\n    it('should calculate the speed given a fileProgress object', () => {\n      const dateNow = new Date()\n      const date5SecondsAgo = new Date(dateNow.getTime() - 5 * 1000)\n      const fileProgress = {\n        bytesUploaded: 1024,\n        uploadStarted: date5SecondsAgo\n      }\n      expect(Math.round(utils.getSpeed(fileProgress))).toEqual(Math.round(205))\n    })\n  })\n\n  describe('getBytesRemaining', () => {\n    it('should calculate the bytes remaining given a fileProgress object', () => {\n      const fileProgress = {\n        bytesUploaded: 1024,\n        bytesTotal: 3096\n      }\n      expect(utils.getBytesRemaining(fileProgress)).toEqual(2072)\n    })\n  })\n\n  describe('getETA', () => {\n    it('should get the ETA remaining based on a fileProgress object', () => {\n      const dateNow = new Date()\n      const date5SecondsAgo = new Date(dateNow.getTime() - 5 * 1000)\n      const fileProgress = {\n        bytesUploaded: 1024,\n        bytesTotal: 3096,\n        uploadStarted: date5SecondsAgo\n      }\n      expect(utils.getETA(fileProgress)).toEqual(10.1)\n    })\n  })\n\n  describe('prettyETA', () => {\n    it('should convert the specified number of seconds to a pretty ETA', () => {\n      expect(utils.prettyETA(0)).toEqual('0s')\n      expect(utils.prettyETA(1.2)).toEqual('1s')\n      expect(utils.prettyETA(1)).toEqual('1s')\n      expect(utils.prettyETA(103)).toEqual('1m 43s')\n      expect(utils.prettyETA(1034.9)).toEqual('17m 14s')\n      expect(utils.prettyETA(103984.1)).toEqual('4h 53m 04s')\n    })\n  })\n\n  describe('copyToClipboard', () => {\n    xit('should copy the specified text to the clipboard', () => {})\n  })\n\n  describe('getSocketHost', () => {\n    it('should get the host from the specified url', () => {\n      expect(\n        utils.getSocketHost('https://foo.bar/a/b/cd?e=fghi&l=k&m=n')\n      ).toEqual('ws://foo.bar/a/b/cd?e=fghi&l=k&m=n')\n    })\n  })\n\n  describe('settle', () => {\n    it('should resolve even if all input promises reject', () => {\n      return expect(\n        utils.settle([\n          Promise.reject(new Error('oops')),\n          Promise.reject(new Error('this went wrong'))\n        ])\n      ).resolves.toMatchObject({\n        successful: [],\n        failed: [ new Error('oops'), new Error('this went wrong') ]\n      })\n    })\n\n    it('should resolve with an object if some input promises resolve', () => {\n      return expect(\n        utils.settle([\n          Promise.reject(new Error('rejected')),\n          Promise.resolve('resolved'),\n          Promise.resolve('also-resolved')\n        ])\n      ).resolves.toMatchObject({\n        successful: ['resolved', 'also-resolved'],\n        failed: [new Error('rejected')]\n      })\n    })\n  })\n\n  describe('limitPromises', () => {\n    let pending = 0\n    function fn () {\n      pending++\n      return new Promise((resolve) => setTimeout(resolve, 10))\n        .then(() => pending--)\n    }\n\n    it('should run at most N promises at the same time', () => {\n      const limit = utils.limitPromises(4)\n      const fn2 = limit(fn)\n\n      const result = Promise.all([\n        fn2(), fn2(), fn2(), fn2(),\n        fn2(), fn2(), fn2(), fn2(),\n        fn2(), fn2()\n      ])\n\n      expect(pending).toBe(4)\n      setTimeout(() => {\n        expect(pending).toBe(4)\n      }, 10)\n\n      return result.then(() => {\n        expect(pending).toBe(0)\n      })\n    })\n\n    it('should accept Infinity as limit', () => {\n      const limit = utils.limitPromises(Infinity)\n      const fn2 = limit(fn)\n\n      const result = Promise.all([\n        fn2(), fn2(), fn2(), fn2(),\n        fn2(), fn2(), fn2(), fn2(),\n        fn2(), fn2()\n      ])\n\n      expect(pending).toBe(10)\n\n      return result.then(() => {\n        expect(pending).toBe(0)\n      })\n    })\n  })\n})\n"]}