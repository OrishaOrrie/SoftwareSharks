{"version":3,"sources":["../../../src/plugins/Dashboard/FileCard.js"],"names":["getFileTypeIcon","require","checkIcon","h","Component","module","exports","props","meta","tempStoreMetaOrSubmit","bind","renderMetaFields","handleClick","ev","file","files","fileCardFor","keyCode","stopPropagation","preventDefault","fileCardDone","id","value","target","name","dataset","metaFields","map","field","placeholder","render","i18n","backgroundColor","type","color","preview","icon"],"mappings":"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","file":"FileCard.js","sourcesContent":["const getFileTypeIcon = require('./getFileTypeIcon')\nconst { checkIcon } = require('./icons')\nconst { h, Component } = require('preact')\n\nmodule.exports = class FileCard extends Component {\n  constructor (props) {\n    super(props)\n\n    this.meta = {}\n\n    this.tempStoreMetaOrSubmit = this.tempStoreMetaOrSubmit.bind(this)\n    this.renderMetaFields = this.renderMetaFields.bind(this)\n    this.handleClick = this.handleClick.bind(this)\n  }\n\n  tempStoreMetaOrSubmit (ev) {\n    const file = this.props.files[this.props.fileCardFor]\n\n    if (ev.keyCode === 13) {\n      ev.stopPropagation()\n      ev.preventDefault()\n      this.props.fileCardDone(this.meta, file.id)\n      return\n    }\n\n    const value = ev.target.value\n    const name = ev.target.dataset.name\n    this.meta[name] = value\n  }\n\n  renderMetaFields (file) {\n    const metaFields = this.props.metaFields || []\n    return metaFields.map((field) => {\n      return <fieldset class=\"uppy-DashboardFileCard-fieldset\">\n        <label class=\"uppy-DashboardFileCard-label\">{field.name}</label>\n        <input class=\"uppy-DashboardFileCard-input\"\n          type=\"text\"\n          data-name={field.id}\n          value={file.meta[field.id]}\n          placeholder={field.placeholder}\n          onkeyup={this.tempStoreMetaOrSubmit}\n          onkeydown={this.tempStoreMetaOrSubmit}\n          onkeypress={this.tempStoreMetaOrSubmit} /></fieldset>\n    })\n  }\n\n  handleClick (ev) {\n    const file = this.props.files[this.props.fileCardFor]\n    this.props.fileCardDone(this.meta, file.id)\n  }\n\n  render () {\n    const file = this.props.files[this.props.fileCardFor]\n\n    return <div class=\"uppy-DashboardFileCard\" aria-hidden={!this.props.fileCardFor}>\n      {this.props.fileCardFor &&\n        <div style=\"width: 100%; height: 100%;\">\n          <div class=\"uppy-DashboardContent-bar\">\n            <h2 class=\"uppy-DashboardContent-title\">{this.props.i18n('editing')} <span class=\"uppy-DashboardContent-titleFile\">{file.meta ? file.meta.name : file.name}</span></h2>\n            <button class=\"uppy-DashboardContent-back\" type=\"button\" title={this.props.i18n('finishEditingFile')}\n              onclick={this.handleClick}>{this.props.i18n('done')}</button>\n          </div>\n          <div class=\"uppy-DashboardFileCard-inner\">\n            <div class=\"uppy-DashboardFileCard-preview\" style={{ backgroundColor: getFileTypeIcon(file.type).color }}>\n              {file.preview\n                ? <img alt={file.name} src={file.preview} />\n                : <div class=\"uppy-DashboardItem-previewIconWrap\">\n                  <span class=\"uppy-DashboardItem-previewIcon\" style={{ color: getFileTypeIcon(file.type).color }}>{getFileTypeIcon(file.type).icon}</span>\n                  <svg class=\"uppy-DashboardItem-previewIconBg\" width=\"72\" height=\"93\" viewBox=\"0 0 72 93\"><g><path d=\"M24.08 5h38.922A2.997 2.997 0 0 1 66 8.003v74.994A2.997 2.997 0 0 1 63.004 86H8.996A2.998 2.998 0 0 1 6 83.01V22.234L24.08 5z\" fill=\"#FFF\" /><path d=\"M24 5L6 22.248h15.007A2.995 2.995 0 0 0 24 19.244V5z\" fill=\"#E4E4E4\" /></g></svg>\n                </div>\n              }\n            </div>\n            <div class=\"uppy-DashboardFileCard-info\">\n              <fieldset class=\"uppy-DashboardFileCard-fieldset\">\n                <label class=\"uppy-DashboardFileCard-label\">{this.props.i18n('name')}</label>\n                <input class=\"uppy-DashboardFileCard-input\"\n                  type=\"text\"\n                  data-name=\"name\"\n                  value={file.meta.name || ''}\n                  placeholder={this.props.i18n('name')}\n                  onkeyup={this.tempStoreMetaOrSubmit}\n                  onkeydown={this.tempStoreMetaOrSubmit}\n                  onkeypress={this.tempStoreMetaOrSubmit} />\n              </fieldset>\n              {this.renderMetaFields(file)}\n            </div>\n          </div>\n          <div class=\"uppy-Dashboard-actions\">\n            <button class=\"UppyButton--circular UppyButton--blue uppy-DashboardFileCard-done\"\n              type=\"button\"\n              title={this.props.i18n('finishEditingFiles')}\n              onclick={this.handleClick}>{checkIcon()}</button>\n          </div>\n        </div>\n      }\n    </div>\n  }\n}\n"]}